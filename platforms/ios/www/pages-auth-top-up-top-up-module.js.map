{"version":3,"sources":["webpack:///./src/app/pages/auth/top-up/top-up.module.ts","webpack:///./src/app/pages/auth/top-up/top-up.page.html","webpack:///./src/app/pages/auth/top-up/top-up.page.scss","webpack:///./src/app/pages/auth/top-up/top-up.page.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAyC;AACM;AACF;AACU;AAEV;AAEH;AAE1C,IAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,sDAAS;KACrB;CACF,CAAC;AAWF;IAAA;IAA8B,CAAC;IAAlB,eAAe;QAT3B,8DAAQ,CAAC;YACR,OAAO,EAAE;gBACP,4DAAY;gBACZ,0DAAW;gBACX,0DAAW;gBACX,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;aAC9B;YACD,YAAY,EAAE,CAAC,sDAAS,CAAC;SAC1B,CAAC;OACW,eAAe,CAAG;IAAD,sBAAC;CAAA;AAAH;;;;;;;;;;;;ACzB5B,2TAA2T,YAAY,ujE;;;;;;;;;;;ACAvU,+DAA+D,uJ;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAyC;AACxB;AAC9B;AACK;AACK;AACO;AACe;AACsC;AAC1B;AACA;AACnC;AAO3D;IAmBE,mBACU,MAAc,EACd,eAAuC,EACvC,OAAuB,EACvB,GAAqB,EACrB,QAAkB,EAClB,gBAAkC,EAClC,cAAoC,EACpC,eAAgC,EAChC,KAA2B;QATrC,iBAaS;QAZC,WAAM,GAAN,MAAM,CAAQ;QACd,oBAAe,GAAf,eAAe,CAAwB;QACvC,YAAO,GAAP,OAAO,CAAgB;QACvB,QAAG,GAAH,GAAG,CAAkB;QACrB,aAAQ,GAAR,QAAQ,CAAU;QAClB,qBAAgB,GAAhB,gBAAgB,CAAkB;QAClC,mBAAc,GAAd,cAAc,CAAsB;QACpC,oBAAe,GAAf,eAAe,CAAiB;QAChC,UAAK,GAAL,KAAK,CAAsB;QA1BrC,UAAK,GAAG;YACN,KAAK,EAAE,EAAE;YACT,UAAU,EAAE,EAAE;YACd,UAAU,EAAE,EAAE;YACd,GAAG,EAAE,EAAE;YACP,IAAI,EAAE,EAAE;SACT;QAGD,gBAAW,GAAW,EAAE,CAAC;QACzB,iBAAY,GAAW,EAAE,CAAC;QAC1B,mBAAc,GAAY,KAAK,CAAC;QAChC,YAAO,GAAY,KAAK,CAAC;QACzB,qBAAgB,GAAY,KAAK,CAAC;QAClC,gBAAW,GAAY,KAAK,CAAC;QAanB,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,eAAK;YAC3B,IAAG,KAAK,YAAY,6DAAa;gBAAG,KAAI,CAAC,QAAQ,EAAE,CAAC;QACtD,CAAC,CAAC;IACJ,CAAC;IAET,4BAAQ,GAAR;QAAA,iBASC;QARC,IAAI,CAAC,eAAe,CAAC,cAAc,EAAE,CAAC,IAAI,CAAC,aAAG;YAC5C,IAAI,GAAG,IAAI,IAAI;gBACb,OAAO,CAAC,GAAG,CAAC,gCAAgC,CAAC,CAAC;iBAC3C;gBACH,KAAI,CAAC,WAAW,GAAG,GAAG,CAAC,QAAQ,EAAE,CAAC;aACnC;QAEH,CAAC,CAAC;IACJ,CAAC;IAED,2BAAO,GAAP;QACE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;IACvC,CAAC;IAED,0BAAM,GAAN;IAEA,CAAC;IAED,4BAAQ,GAAR;QACI,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,qBAAqB,CAAC,CAAC;IACjD,CAAC;IAED,0BAAM,GAAN;QACE,IAAI,CAAC,WAAW,EAAE,CAAC;IACrB,CAAC;IAED,0BAAM,GAAN;QACE,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC;QAC3B,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,iBAAiB,CAAC,CAAC;IAC3C,CAAC;IAEC,+BAA+B;IAC/B,+BAAW,GAAX;QAAA,iBA+CC;QA9CC,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;YACxB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;YAC3B,IAAI,GAAG,GAAG,6DAA6D,CAAC;YACxE,IAAI,QAAM,GAAW,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAC3D,IAAI,SAAO,GAAW,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,OAAO,CAAI,QAAM,MAAG,EAAE,EAAE,CAAC,CAAC;YAEtE,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;gBACjB,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,cAAc,EAAE,yEAAW,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,IAAI,CAElF,UAAC,QAAQ;oBACP,IAAI,QAAQ,CAAC,MAAM,IAAI,GAAG,EAAE;wBAC1B,IAAI,MAAM,GAAG,KAAI,CAAC,GAAG,CAAC,oBAAoB,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;wBAC1D,IAAI,MAAM,IAAI,IAAI,IAAI,MAAM,CAAC,SAAS,IAAI,CAAC,EAAE;4BAC3C,IAAI,KAAK,GAAG,KAAI,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,EAAE,SAAO,EAAE,QAAM,CAAC,CAAC;4BAC3D,KAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;yBAC/B;6BAAM;4BACL,KAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,iBAAe,MAAM,CAAC,YAAc,CAAC;yBACvE;qBACF;gBACH,CAAC,CACF,CAAC,KAAK,CAAC,UAAC,KAAK;oBACZ,KAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,kBAAgB,KAAO,CAAE,CAAC;gBAC7D,CAAC,CAAC;aACH;iBACI;gBACH,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,cAAc,EAAE,yEAAW,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,SAAS,CAE3F,UAAC,QAAQ;oBACP,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;oBACtB,IAAI,MAAM,GAAG,KAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC;oBACzD,IAAI,MAAM,IAAI,IAAI,IAAI,MAAM,CAAC,SAAS,IAAI,CAAC,EAAE;wBAC3C,IAAI,KAAK,GAAG,KAAI,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,EAAE,SAAO,EAAE,QAAM,CAAC,CAAC;wBAC3D,KAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;qBAC/B;yBAAM;wBACL,KAAI,CAAC,YAAY,GAAG,MAAM,CAAC,YAAY,CAAC;qBACzC;gBACH,CAAC,EACD,UAAC,KAAK;gBAEN,CAAC,CACF;aACF;SAGF;IAEH,CAAC;IAED,+BAAW,GAAX,UAAY,OAAO,EAAE,OAAO,EAAE,MAAM;QAClC,IAAI,KAAK,GAAG;YACV,UAAU,EAAE,OAAO,CAAC,UAAU;YAC9B,MAAM,EAAE,yEAAW,CAAC,WAAW;YAC/B,QAAQ,EAAE,OAAO,CAAC,QAAQ;YAC1B,UAAU,EAAE,OAAO,CAAC,UAAU;YAC9B,OAAO,EAAE,OAAO,CAAC,OAAO;YACxB,QAAQ,EAAE,OAAO,CAAC,QAAQ;YAC1B,UAAU,EAAE,OAAO,CAAC,IAAI;YACxB,IAAI,EAAE,GAAG;YACT,QAAQ,EAAE,KAAK;YACf,OAAO,EAAE,GAAG;YACZ,MAAM,EAAE,6CAA6C;YACrD,MAAM,EAAE,EAAE;YACV,YAAY,EAAE,EAAE;YAChB,OAAO,EAAE,EAAE;YACX,MAAM,EAAE,EAAE;YACV,UAAU,EAAE,EAAE;YACd,OAAO,EAAE,SAAS;SACnB;QACD,IAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;QACxD,OAAO,KAAK,CAAC;IACf,CAAC;IAED,qCAAiB,GAAjB,UAAkB,KAAK;QACrB,gBAAgB;QADlB,iBAgFC;QA7EC,IAAM,OAAO,GAA4B;YACvC,OAAO,EAAE;gBACP,MAAM,EAAE,EAAE;gBACV,KAAK,EAAE,SAAS;aACjB;YACD,KAAK,EAAE;gBACL,KAAK,EAAE,WAAW;gBAClB,aAAa,EAAE,IAAI;gBACnB,UAAU,EAAE,SAAS;aACtB;YACD,UAAU,EAAE;gBACV,KAAK,EAAE,MAAM;gBACb,YAAY,EAAE,cAAc;gBAC5B,KAAK,EAAE,MAAM;gBACb,KAAK,EAAE,aAAa;aACrB;YACD,aAAa,EAAE;gBACb,KAAK,EAAE,SAAS;gBAChB,YAAY,EAAE,iBAAiB;gBAC/B,KAAK,EAAE,MAAM;gBACb,KAAK,EAAE,gBAAgB;aACxB;YACD,WAAW,EAAE;gBACX,KAAK,EAAE,OAAO;gBACd,YAAY,EAAE,eAAe;gBAC7B,KAAK,EAAE,MAAM;gBACb,KAAK,EAAE,cAAc;aACtB;YACD,kBAAkB,EAAE,KAAK;SAE1B,CAAC;QAEF,aAAa;QACb,IAAI,GAAG,GAAG,6DAA6D,CAAC;QACxE,IAAI,SAAS,GAAG,gDAAgD,CAAC;QAEjE,IAAI,MAAM,GAAG,4CAA4C,CAAC;QAC1D,MAAM,IAAI,qBAAqB,CAAC;QAChC,MAAM,IAAI,8BAA8B,GAAG,GAAG,GAAG,KAAK,CAAC;QACvD,KAAK,IAAI,IAAI,IAAI,KAAK,EAAE;YACtB,MAAM,IAAI,MAAM,GAAG,IAAI,GAAG,gDAAgD,CAAC;YAC3E,MAAM,IAAI,IAAI,GAAG,6CAA6C,CAAC;YAC/D,MAAM,IAAI,IAAI,GAAG,mCAAmC,GAAG,IAAI,GAAG,KAAK,CAAC;YACpE,MAAM,IAAI,IAAI,GAAG,oCAAoC,GAAG,KAAK,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC;YAC5E,MAAM,IAAI,mBAAmB,GAAG,IAAI,GAAG,eAAe,CAAC;SACxD;QACD,MAAM,IAAI,kCAAkC,CAAC;QAC7C,MAAM,IAAI,gBAAgB,CAAC;QAE3B,IAAI;YACF,IAAM,SAAO,GAA2B,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,SAAS,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;YAEnG,SAAO,CAAC,EAAE,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,cAAI;gBACvC,SAAO,CAAC,KAAK,EAAE,CAAC;gBAChB,KAAI,CAAC,cAAc,GAAG,KAAK,CAAC;YAC9B,CAAC,CAAC;YAEF,SAAO,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,SAAS,CAAC,WAAC;gBAC5B,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gBACxB,KAAI,CAAC,cAAc,GAAG,KAAK,CAAC;gBAC5B,KAAI,CAAC,gBAAgB,EAAE,CAAC;YAC1B,CAAC,CAAC;YAGF,SAAO,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,SAAS,CAAC,cAAI;gBACnC,IAAI,CAAC,KAAI,CAAC,gBAAgB,EAAE;oBAC1B,SAAO,CAAC,aAAa,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC,IAAI,CAAC,kBAAQ;wBACnD,KAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;oBAC/B,CAAC,CAAC;iBACH;YAEH,CAAC,CAAC;SAEH;QACD,OAAO,GAAG,EAAE;YACV,IAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,GAAG,CAAC;SACtC;IACH,CAAC;IAGD,oCAAgB,GAAhB;QAAA,iBAQC;QAPC,UAAU,CAAC;YACT,IAAI,KAAI,CAAC,WAAW,EAAE;gBACpB,KAAI,CAAC,YAAY,EAAE;aACpB;QAEH,CAAC,EAAE,IAAI,CAAC,CAAC;IAEX,CAAC;IAEK,gCAAY,GAAlB;;;;;;6BAEM,CAAC,IAAI,CAAC,OAAO,EAAb,wBAAa;wBACf,qBAAM,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,IAAI,CAC9C,kBAAQ;gCACN,IAAI,QAAQ,CAAC,MAAM,IAAI,GAAG,EAAE;oCAC1B,KAAI,CAAC,WAAW,GAAG,KAAK,CAAC;oCACzB,IAAI,MAAM,GAAG,KAAI,CAAC,GAAG,CAAC,oBAAoB,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;oCAC1D,KAAI,CAAC,eAAe,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;oCAC7C,KAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;iCACpD;4BACH,CAAC,CACF,CAAC,KAAK,CAAC,eAAK;gCACX,KAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,KAAK,CAAC;4BACzC,CAAC,CAAC;;wBAXF,SAWE;;4BAEF,qBAAM,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,SAAS,CACvD,kBAAQ;4BACN,IAAI,MAAM,GAAG,KAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC;4BACzD,IAAI,MAAM,IAAI,IAAI,EAAE;gCAClB,KAAI,CAAC,WAAW,GAAG,KAAK,CAAC;gCACzB,KAAI,CAAC,eAAe,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;gCAC7C,KAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;6BACpD;iCAAM;gCACL,KAAI,CAAC,YAAY,GAAG,MAAM,CAAC,YAAY,CAAC;6BACzC;wBACH,CAAC,CACF;;wBAXD,SAWC;;;;;;KAEJ;IAtQQ,SAAS;QALrB,+DAAS,CAAC;YACT,QAAQ,EAAE,YAAY;YACtB,uGAAiC;;SAElC,CAAC;+EAqBkB,sDAAM;YACG,0GAAsB;YAC9B,gFAAc;YAClB,+FAAgB;YACX,uDAAQ;YACA,oFAAgB;YAClB,2GAAoB;YACnB,mFAAe;YACzB,4GAAoB;OA5B1B,SAAS,CAuQrB;IAAD,gBAAC;CAAA;AAvQqB","file":"pages-auth-top-up-top-up-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { TopUpPage } from './top-up.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TopUpPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [TopUpPage]\n})\nexport class TopUpPageModule {}\n","module.exports = \"<ion-header no-border>\\n  <ion-toolbar>\\n      <ion-buttons slot=\\\"end\\\">\\n          <a class=\\\"Login-Link\\\" slot=\\\"end\\\" (click)=\\\"doLogin()\\\" > Cancel</a>\\n      </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content>\\n  <div class=\\\"container\\\">\\n      <ion-grid style=\\\"position: fixed;width: 100%;z-index: 200\\\">\\n          <ion-row>\\n              <ion-col>\\n                  <div class=\\\"logo\\\"></div>\\n              </ion-col>\\n          </ion-row>\\n          <ion-row>\\n            <ion-col>\\n                <h3 class=\\\"warningMessage\\\">RM100 Membership</h3>\\n            </ion-col>\\n          </ion-row>\\n          <ion-row>\\n              <ion-col size=\\\"2\\\"></ion-col>\\n              <ion-col size=\\\"8\\\">\\n                <p class=\\\"text-center\\\">Please select a payment method:</p>\\n              </ion-col>\\n              <ion-col size=\\\"2\\\"></ion-col>\\n          </ion-row>\\n          <ion-row >\\n            <ion-col>\\n                <div class=\\\"creditcard\\\" (click)=\\\"doCredit()\\\" >\\n                    <ion-grid>\\n                      <ion-row>\\n                        <ion-col size=\\\"6\\\">\\n                          <img src=\\\"../../assets/images/btn-credit-card-active.svg\\\"  width=130 height=100/>\\n                        </ion-col>\\n                        <ion-col size=\\\"6\\\">\\n                          <h3 class=\\\"text-center creditcard-text\\\">Credit Card</h3>\\n                        </ion-col>\\n                      </ion-row>\\n                    </ion-grid>\\n                  </div>\\n                  <div class=\\\"onlinebanking\\\" (click)=\\\"doBank()\\\">\\n                      <ion-grid>\\n                        <ion-row>\\n                          <ion-col size=\\\"6\\\">\\n                            <img src=\\\"../../assets/images/btn-bank-inactive.svg\\\" width=130 height=100/>\\n                          </ion-col>\\n                          <ion-col size=\\\"6\\\">\\n                            <h3 class=\\\"text-center onlinebanking-text\\\">Online Banking</h3>\\n                          </ion-col>\\n                        </ion-row>\\n                      </ion-grid>\\n                    </div>\\n            </ion-col>\\n          </ion-row>\\n          <ion-row>\\n            <ion-col>\\n              <a (click)=\\\"doSkip()\\\"  class=\\\"Login-Link\\\">Skip ...</a>\\n            </ion-col>\\n          </ion-row>      \\n      </ion-grid>\\n    \\n  </div>\\n\\n</ion-content>\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2F1dGgvdG9wLXVwL3RvcC11cC5wYWdlLnNjc3MifQ== */\"","import { DataTransactionService } from './../../..//services/data-transaction/data-transaction.service';\nimport { ConstantService } from './../../../services/constant/constant.service';\nimport { Component, OnInit } from '@angular/core';\nimport { Router,NavigationEnd } from '@angular/router';\nimport { LoadingController, Platform } from '@ionic/angular'\nimport { RestApiService } from 'src/app/services/rest-api.service';\nimport { NativeApiService } from 'src/app/services/native-api/native-api.service';\nimport { ThemeableBrowser, ThemeableBrowserObject, ThemeableBrowserOptions } from '@ionic-native/themeable-browser/ngx';\nimport { RouteProviderService } from 'src/app/services/route-provider/route-provider.service';\nimport { AlertProviderService } from 'src/app/services/alert-provider/alert-provider.service';\nimport { environment } from 'src/environments/environment';\n\n@Component({\n  selector: 'app-top-up',\n  templateUrl: './top-up.page.html',\n  styleUrls: ['./top-up.page.scss'],\n})\nexport class TopUpPage implements OnInit {\n\n  Model = {\n    Phone: '',\n    CreditCard: '',\n    ExpireDate: '',\n    CVV: '',\n    Name: '',\n  }\n\n\n  AccessToken: string = '';\n  ErrorMessage: string = '';\n  isMethodCalled: boolean = false;\n  isDebug: boolean = false;\n  isScriptExecuted: boolean = false;\n  isStillHold: boolean = false;\n\n\n  constructor(\n    private router: Router,\n    private dataTransaction: DataTransactionService,\n    private restApi: RestApiService,\n    private api: NativeApiService,\n    private platform: Platform,\n    private themeableBrowser: ThemeableBrowser,\n    private routerProvider: RouteProviderService,\n    private constantService: ConstantService,\n    private alert: AlertProviderService) { \n            router.events.subscribe(event=>{\n              if(event instanceof NavigationEnd)  this.ngOnInit();\n            })\n          }\n\n  ngOnInit() {\n    this.dataTransaction.getAccessToken().then(acc => {\n      if (acc == null)\n        console.log('access token does not detected');\n      else {\n        this.AccessToken = acc.toString();\n      }\n\n    })\n  }\n\n  doLogin(){\n    this.router.navigate(['auth-phone']);\n  }\n\n  doNext(){\n   \n  }\n\n  doCredit(){\n      this.router.navigate(['top-up-account-info'])\n  }\n\n  doBank(){\n    this.createOrder();\n  }\n\n  doSkip(){\n    console.log('skip clicked')\n    this.router.navigate(['change-password'])\n  }\n\n    //oderType = {CreditCard / All}\n    createOrder() {\n      if (!this.isMethodCalled) {\n        this.isMethodCalled = true;\n        let url = 'https://test.paydollar.com/b2cDemo/eng/dPayment/payComp.jsp';\n        let epYear: string = this.Model.ExpireDate.substring(0, 4);\n        let epMonth: string = this.Model.ExpireDate.replace(`${epYear}-`, '');\n  \n        if (!this.isDebug) {\n          this.api.CreateOrder('Subscription', environment.orderAmount, this.AccessToken).then(\n  \n            (response) => {\n              if (response.status == 200) {\n                let result = this.api.converResponseToJson(response.data);\n                if (result != null && result.ErrorCode == 0) {\n                  let model = this.createModel(result.Data, epMonth, epYear);\n                  this.createPaymentForm(model);\n                } else {\n                  this.alert.showErrorMessageAlert(`API Error = ${result.ErrorMessage}`)\n                }\n              }\n            }\n          ).catch((error) => {\n            this.alert.showErrorMessageAlert(`System Error ${error}` );\n          })\n        }\n        else {\n          this.restApi.CreateOrder('Subscription', environment.orderAmount, this.AccessToken).subscribe(\n  \n            (response) => {\n              console.log(response);\n              let result = this.restApi.converResponseToJson(response);\n              if (result != null && result.ErrorCode == 0) {\n                let model = this.createModel(result.Data, epMonth, epYear);\n                this.createPaymentForm(model);\n              } else {\n                this.ErrorMessage = result.ErrorMessage;\n              }\n            },\n            (error) => {\n  \n            }\n          )\n        }\n  \n  \n      }\n  \n    }\n  \n    createModel(reponse, epMonth, epYear) {\n      let model = {\n        merchantId: reponse.MerchantId,\n        amount: environment.orderAmount,\n        orderRef: reponse.OrderRef,\n        successUrl: reponse.SuccessUrl,\n        failUrl: reponse.FailUrl,\n        errorUrl: reponse.ErrorUrl,\n        secureHash: reponse.Hash,\n        lang: \"E\",\n        currCode: '458',\n        payType: 'N',\n        remark: 'JOMSAVE_KSJOA01B3YHD7dUS5CXX01HD6X64P0B1QDD',\n        cardNo: '',\n        securityCode: '',\n        epMonth: '',\n        epYear: '',\n        cardHolder: '',\n        pMethod: 'MYCLEAR'\n      }\n      this.alert.showErrorMessageAlert(JSON.stringify(model));\n      return model;\n    }\n  \n    createPaymentForm(model) {\n      //Browser Option\n  \n      const options: ThemeableBrowserOptions = {\n        toolbar: {\n          height: 44,\n          color: '#fbb03b'\n        },\n        title: {\n          color: '#ffffffff',\n          showPageTitle: true,\n          staticText: 'JomSave'\n        },\n        backButton: {\n          image: 'back',\n          imagePressed: 'back_pressed',\n          align: 'left',\n          event: 'backPressed'\n        },\n        forwardButton: {\n          image: 'forward',\n          imagePressed: 'forward_pressed',\n          align: 'left',\n          event: 'forwardPressed'\n        },\n        closeButton: {\n          image: 'close',\n          imagePressed: 'close_pressed',\n          align: 'left',\n          event: 'closePressed'\n        },\n        backButtonCanClose: false,\n  \n      };\n  \n      //Form Script\n      let url = 'https://test.paydollar.com/b2cDemo/eng/dPayment/payComp.jsp';\n      let direction = 'https://member.jomsave.com/Home/TutorialSlides';\n  \n      var script = 'var form = document.createElement(\"form\");';\n      script += 'form.method=\"post\";';\n      script += 'form.setAttribute(\"action\",\"' + url + '\");';\n      for (var data in model) {\n        script += 'var ' + data + 'hiddenField = document.createElement(\"input\");';\n        script += data + 'hiddenField.setAttribute(\"type\", \"hidden\");';\n        script += data + 'hiddenField.setAttribute(\"name\",\"' + data + '\");';\n        script += data + 'hiddenField.setAttribute(\"value\",\"' + model[data] + '\");';\n        script += 'form.appendChild(' + data + 'hiddenField);';\n      }\n      script += 'document.body.appendChild(form);';\n      script += 'form.submit();';\n  \n      try {\n        const browser: ThemeableBrowserObject = this.themeableBrowser.create(direction, '_blank', options);\n  \n        browser.on('closePressed').subscribe(data => {\n          browser.close();\n          this.isMethodCalled = false;\n        })\n  \n        browser.on('exit').subscribe(e => {\n          this.isStillHold = true;\n          this.isMethodCalled = false;\n          this.doCallGetProfile();\n        })\n  \n  \n        browser.on('loadstop').subscribe(data => {\n          if (!this.isScriptExecuted) {\n            browser.executeScript({ code: script }).then(response => {\n              this.isScriptExecuted = true;\n            })\n          }\n  \n        })\n  \n      }\n      catch (err) {\n        this.alert.showErrorMessageAlert(err)\n      }\n    }\n  \n  \n    doCallGetProfile() {\n      setTimeout(() => {\n        if (this.isStillHold) {\n          this.doGetProfile()\n        }\n  \n      }, 5000);\n  \n    }\n  \n    async doGetProfile() {\n  \n      if (!this.isDebug) {\n        await this.api.GetProfile(this.AccessToken).then(\n          response => {\n            if (response.status == 200) {\n              this.isStillHold = false;\n              let result = this.api.converResponseToJson(response.data);\n              this.dataTransaction.setProfile(result.Data);\n              this.routerProvider.nextStep(result.Data.NextStep);\n            }\n          }\n        ).catch(error => {\n          this.alert.showErrorMessageAlert(error)\n        })\n      } else {\n        await this.restApi.GetProfile(this.AccessToken).subscribe(\n          response => {\n            let result = this.restApi.converResponseToJson(response);\n            if (result != null) {\n              this.isStillHold = false;\n              this.dataTransaction.setProfile(result.Data);\n              this.routerProvider.nextStep(result.Data.NextStep);\n            } else {\n              this.ErrorMessage = result.ErrorMessage;\n            }\n          }\n        )\n      }\n    }\n}\n"],"sourceRoot":""}