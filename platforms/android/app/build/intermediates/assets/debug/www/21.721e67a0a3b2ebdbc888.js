(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"0uLW":function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),o=e("mrSG"),u=e("e0iR"),r=e("ZYCi"),s=e("603S"),i=e("Zx/A"),a=e("56ai"),c=e("ZZ/e"),p=e("n6ga"),b=e("utPD"),h=function(){function n(n,l,e,t,o,u,s,i,a){var c=this;this.dataTransaction=n,this.router=l,this.zbar=e,this.api=t,this.routeProvider=o,this.platform=u,this.loading=s,this.restApi=i,this.alert=a,this.Model={Phone:"",Referral:"",ScannData:{}},this.UserInfo={UserId:0,DisplayName:"",Photo:"",Roles:""},this.ErrorMessage="",this.isDebug=!1,this.router.routeReuseStrategy.shouldReuseRoute=function(){return!1},l.events.subscribe(function(n){n instanceof r.d&&c.ngOnInit()}),this.zbarOptions={flash:"off",drawSight:!1},this.isDebug=!u.is("cordova")}return n.prototype.ngOnInit=function(){var n=this;this.dataTransaction.getUserPhone().then(function(l){null==l||""==l?n.router.navigate(["auth-phone"]):(n.Model.Phone=l.toString(),n.dataTransaction.getAccessToken().then(function(l){n.AccessToken=l.toString()}))})},n.prototype.doLogin=function(){this.router.navigate(["auth-phone"])},n.prototype.doNext=function(){this.doSetUpline()},n.prototype.doCancel=function(){this.router.navigate(["auth-phone"])},n.prototype.doForgotPassword=function(){},n.prototype.doSkip=function(){var n=this;this.isDebug?this.restApi.SetUpline("0",this.AccessToken).subscribe(function(l){var e=n.restApi.converResponseToJson(l);"0"==e.ErrorCode?n.routeProvider.nextStep(e.Data.NextStep):n.ErrorMessage=e.ErrorMessage},function(l){n.ErrorMessage=l}):this.api.SetUpline("0",this.AccessToken).then(function(l){var e=n.api.converResponseToJson(l.data);200==l.status?n.routeProvider.nextStep(e.Data.NextStep):n.alert.showErrorMessageAlert(e.ErrorMessage)},function(l){n.alert.showErrorMessageAlert(l),n.ErrorMessage=l})},n.prototype.doScanCode=function(){var n=this;this.zbar.scan(this.zbarOptions).then(function(l){n.Model.Referral=l,n.doGetUserInfo()}).catch(function(n){alert(n)})},n.prototype.doEncodedText=function(){},n.prototype.doGetUserInfo=function(){var n=this;""!=this.Model.Referral&&6==this.Model.Referral.length&&(this.presentLoading(),this.isDebug?this.restApi.GetUserInfo(this.Model.Referral,this.AccessToken).subscribe(function(l){var e=n.restApi.converResponseToJson(l);"0"==e.ErrorCode?(n.UserInfo=e.Data,n.ErrorMessage=""):(n.UserInfo={UserId:0,DisplayName:"",Photo:"",Roles:""},n.ErrorMessage="Member doesn't exist.")}):this.api.GetUserInfo(this.Model.Referral,this.AccessToken).then(function(l){var e=n.api.converResponseToJson(l.data);200==l.status?n.UserInfo=e.Data:(n.UserInfo={UserId:0,DisplayName:"",Photo:"",Roles:""},n.alert.showErrorMessageAlert(e.ErrorMessage))},function(l){n.UserInfo={UserId:0,DisplayName:"",Photo:"",Roles:""},n.alert.showErrorMessageAlert(l)}))},n.prototype.presentLoading=function(){return o.b(this,void 0,void 0,function(){return o.e(this,function(n){switch(n.label){case 0:return[4,this.loading.create({message:"Please wait",duration:500})];case 1:return[4,n.sent().present()];case 2:return n.sent(),[2]}})})},n.prototype.doSetUpline=function(){var n=this;0!=this.UserInfo.UserId&&(this.isDebug?this.restApi.SetUpline(this.UserInfo.UserId,this.AccessToken).subscribe(function(l){var e=n.restApi.converResponseToJson(l);"0"==e.ErrorCode?n.routeProvider.nextStep(e.Data.NextStep):n.ErrorMessage=e.ErrorMessage},function(l){n.ErrorMessage=l}):this.api.SetUpline(this.UserInfo.UserId,this.AccessToken).then(function(l){var e=n.api.converResponseToJson(l.data);200==l.status?n.routeProvider.nextStep(e.Data.NextStep):n.alert.showErrorMessageAlert(e.ErrorMessage)},function(l){n.alert.showErrorMessageAlert(l)}))},n.prototype.doCheckValue=function(n){/([a-z])/.test(n.key)||8==n.keyCode||8==n.which||n.preventDefault(),console.log(n.key)},n.prototype.doValidate=function(){if(0==this.Model.Referral.length)return this.alert.showErrorMessageAlert("Please fill in the Referral ID"),!1},n}(),d=function(){return function(){}}(),f=e("pMnS"),g=e("oBZk"),v=e("gIcY"),k=e("Ip0R"),m=t.nb({encapsulation:0,styles:[[""]],data:{}});function M(n){return t.Hb(0,[(n()(),t.pb(0,0,null,null,17,"ion-row",[],null,null,null,g.U,g.s)),t.ob(1,49152,null,0,c.jb,[t.h,t.k],null,null),(n()(),t.pb(2,0,null,0,1,"ion-col",[["size","3"]],null,null,null,g.G,g.e)),t.ob(3,49152,null,0,c.u,[t.h,t.k],{size:[0,"size"]},null),(n()(),t.pb(4,0,null,0,3,"ion-col",[["size","6"]],null,null,null,g.G,g.e)),t.ob(5,49152,null,0,c.u,[t.h,t.k],{size:[0,"size"]},null),(n()(),t.pb(6,0,null,0,1,"div",[["class","picture-container text-center"]],null,null,null,null,null)),(n()(),t.pb(7,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),t.pb(8,0,null,0,1,"ion-col",[["size","3"]],null,null,null,g.G,g.e)),t.ob(9,49152,null,0,c.u,[t.h,t.k],{size:[0,"size"]},null),(n()(),t.pb(10,0,null,0,7,"ion-col",[["size","12"]],null,null,null,g.G,g.e)),t.ob(11,49152,null,0,c.u,[t.h,t.k],{size:[0,"size"]},null),(n()(),t.pb(12,0,null,0,1,"p",[["class","text-center"]],null,null,null,null,null)),(n()(),t.Fb(-1,null,["Member"])),(n()(),t.pb(14,0,null,0,1,"h5",[["class","text-center"]],null,null,null,null,null)),(n()(),t.Fb(15,null,["",""])),(n()(),t.pb(16,0,null,0,1,"p",[["class","text-center"]],null,null,null,null,null)),(n()(),t.Fb(-1,null,["Please confirm the referral information"]))],function(n,l){n(l,3,0,"3"),n(l,5,0,"6"),n(l,9,0,"3"),n(l,11,0,"12")},function(n,l){var e=l.component;n(l,7,0,e.UserInfo.Photo),n(l,15,0,e.UserInfo.DisplayName)})}function w(n){return t.Hb(0,[(n()(),t.pb(0,0,null,null,1,"p",[["class","text-center"],["color","danger"]],null,null,null,null,null)),(n()(),t.Fb(1,null,["",""]))],null,function(n,l){n(l,1,0,l.component.ErrorMessage)})}function x(n){return t.Hb(0,[(n()(),t.pb(0,0,null,null,3,"ion-header",[["no-border",""]],null,null,null,g.M,g.k)),t.ob(1,49152,null,0,c.C,[t.h,t.k],null,null),(n()(),t.pb(2,0,null,0,1,"ion-toolbar",[],null,null,null,g.db,g.B)),t.ob(3,49152,null,0,c.Cb,[t.h,t.k],null,null),(n()(),t.pb(4,0,null,null,58,"ion-content",[],null,null,null,g.H,g.f)),t.ob(5,49152,null,0,c.v,[t.h,t.k],null,null),(n()(),t.pb(6,0,null,0,50,"div",[["class","container"]],null,null,null,null,null)),(n()(),t.pb(7,0,null,null,6,"ion-grid",[],null,null,null,g.L,g.j)),t.ob(8,49152,null,0,c.B,[t.h,t.k],null,null),(n()(),t.pb(9,0,null,0,4,"ion-row",[],null,null,null,g.U,g.s)),t.ob(10,49152,null,0,c.jb,[t.h,t.k],null,null),(n()(),t.pb(11,0,null,0,2,"ion-col",[],null,null,null,g.G,g.e)),t.ob(12,49152,null,0,c.u,[t.h,t.k],null,null),(n()(),t.pb(13,0,null,0,0,"div",[["class","logo"]],null,null,null,null,null)),(n()(),t.pb(14,0,null,null,42,"ion-grid",[],null,null,null,g.L,g.j)),t.ob(15,49152,null,0,c.B,[t.h,t.k],null,null),(n()(),t.pb(16,0,null,0,7,"ion-row",[],null,null,null,g.U,g.s)),t.ob(17,49152,null,0,c.jb,[t.h,t.k],null,null),(n()(),t.pb(18,0,null,0,5,"ion-col",[],null,null,null,g.G,g.e)),t.ob(19,49152,null,0,c.u,[t.h,t.k],null,null),(n()(),t.pb(20,0,null,0,1,"h3",[["class","warningMessage"]],null,null,null,null,null)),(n()(),t.Fb(-1,null,["Who is your Referral?"])),(n()(),t.pb(22,0,null,0,1,"p",[["class","text-center"]],null,null,null,null,null)),(n()(),t.Fb(-1,null,["Please key in your referral\u2019s Member ID"])),(n()(),t.pb(24,0,null,0,18,"ion-row",[],null,null,null,g.U,g.s)),t.ob(25,49152,null,0,c.jb,[t.h,t.k],null,null),(n()(),t.pb(26,0,null,0,1,"ion-col",[["size","3"]],null,null,null,g.G,g.e)),t.ob(27,49152,null,0,c.u,[t.h,t.k],{size:[0,"size"]},null),(n()(),t.pb(28,0,null,0,12,"ion-col",[["size","7"]],null,null,null,g.G,g.e)),t.ob(29,49152,null,0,c.u,[t.h,t.k],{size:[0,"size"]},null),(n()(),t.pb(30,0,null,0,10,"div",[["class","member-input-container"]],null,null,null,null,null)),(n()(),t.pb(31,0,null,null,7,"input",[["class","input-icon member-id-input"],["maxlength","6"],["type","text"]],[[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"keydown"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,l,e){var o=!0,u=n.component;return"input"===l&&(o=!1!==t.zb(n,32)._handleInput(e.target.value)&&o),"blur"===l&&(o=!1!==t.zb(n,32).onTouched()&&o),"compositionstart"===l&&(o=!1!==t.zb(n,32)._compositionStart()&&o),"compositionend"===l&&(o=!1!==t.zb(n,32)._compositionEnd(e.target.value)&&o),"ngModelChange"===l&&(o=!1!==(u.Model.Referral=e)&&o),"input"===l&&(o=!1!==u.doGetUserInfo()&&o),"keydown"===l&&(o=!1!==u.doCheckValue(e)&&o),o},null,null)),t.ob(32,16384,null,0,v.b,[t.D,t.k,[2,v.a]],null,null),t.ob(33,540672,null,0,v.d,[],{maxlength:[0,"maxlength"]},null),t.Cb(1024,null,v.e,function(n){return[n]},[v.d]),t.Cb(1024,null,v.f,function(n){return[n]},[v.b]),t.ob(36,671744,null,0,v.i,[[8,null],[6,v.e],[8,null],[6,v.f]],{model:[0,"model"]},{update:"ngModelChange"}),t.Cb(2048,null,v.g,null,[v.i]),t.ob(38,16384,null,0,v.h,[[4,v.g]],null,null),(n()(),t.pb(39,0,null,null,0,"img",[["class","member-input--icon"],["src","../../assets/images/btn-scan-qr.svg"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.doScanCode()&&t),t},null,null)),(n()(),t.pb(40,0,null,null,0,"span",[["class","input-content"]],null,null,null,null,null)),(n()(),t.pb(41,0,null,0,1,"ion-col",[["size","2"]],null,null,null,g.G,g.e)),t.ob(42,49152,null,0,c.u,[t.h,t.k],{size:[0,"size"]},null),(n()(),t.gb(16777216,null,0,1,null,M)),t.ob(44,16384,null,0,k.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.pb(45,0,null,0,5,"ion-row",[],null,null,null,g.U,g.s)),t.ob(46,49152,null,0,c.jb,[t.h,t.k],null,null),(n()(),t.pb(47,0,null,0,3,"ion-col",[],null,null,null,g.G,g.e)),t.ob(48,49152,null,0,c.u,[t.h,t.k],null,null),(n()(),t.gb(16777216,null,0,1,null,w)),t.ob(50,16384,null,0,k.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.pb(51,0,null,0,5,"ion-row",[],null,null,null,g.U,g.s)),t.ob(52,49152,null,0,c.jb,[t.h,t.k],null,null),(n()(),t.pb(53,0,null,0,3,"ion-col",[["class","text-center"]],null,null,null,g.G,g.e)),t.ob(54,49152,null,0,c.u,[t.h,t.k],null,null),(n()(),t.pb(55,0,null,0,1,"a",[["class","text-center"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.doSkip()&&t),t},null,null)),(n()(),t.Fb(-1,null,["Skip For Now"])),(n()(),t.pb(57,0,null,0,5,"ion-fab",[["horizontal","end"],["slot","fixed"],["vertical","bottom"]],null,null,null,g.K,g.h)),t.ob(58,49152,null,0,c.x,[t.h,t.k],{horizontal:[0,"horizontal"],vertical:[1,"vertical"]},null),(n()(),t.pb(59,0,null,0,3,"ion-fab-button",[["class","next-button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.doNext()&&t),t},g.J,g.i)),t.ob(60,49152,null,0,c.y,[t.h,t.k],null,null),(n()(),t.pb(61,0,null,0,1,"ion-icon",[["name","arrow-forward"]],null,null,null,g.N,g.l)),t.ob(62,49152,null,0,c.D,[t.h,t.k],{name:[0,"name"]},null)],function(n,l){var e=l.component;n(l,27,0,"3"),n(l,29,0,"7"),n(l,33,0,"6"),n(l,36,0,e.Model.Referral),n(l,42,0,"2"),n(l,44,0,e.UserInfo.UserId>0),n(l,50,0,""!=e.ErrorMessage),n(l,58,0,"end","bottom"),n(l,62,0,"arrow-forward")},function(n,l){n(l,31,0,t.zb(l,33).maxlength?t.zb(l,33).maxlength:null,t.zb(l,38).ngClassUntouched,t.zb(l,38).ngClassTouched,t.zb(l,38).ngClassPristine,t.zb(l,38).ngClassDirty,t.zb(l,38).ngClassValid,t.zb(l,38).ngClassInvalid,t.zb(l,38).ngClassPending)})}function E(n){return t.Hb(0,[(n()(),t.pb(0,0,null,null,1,"app-referral",[],null,null,null,x,m)),t.ob(1,114688,null,0,h,[u.a,r.n,i.a,s.a,a.a,c.Jb,c.Gb,p.a,b.a],null,null)],function(n,l){n(l,1,0)},null)}var y=t.lb("app-referral",h,E,{},{},[]),I=e("a3Cf"),z=function(n){function l(){var l=null!==n&&n.apply(this,arguments)||this;return l.Encode={TEXT_TYPE:"TEXT_TYPE",EMAIL_TYPE:"EMAIL_TYPE",PHONE_TYPE:"PHONE_TYPE",SMS_TYPE:"SMS_TYPE"},l}return Object(o.d)(l,n),l.prototype.scan=function(n){return Object(I.cordova)(this,"scan",{callbackOrder:"reverse"},arguments)},l.prototype.encode=function(n,l){return Object(I.cordova)(this,"encode",{},arguments)},l.pluginName="BarcodeScanner",l.plugin="phonegap-plugin-barcodescanner",l.pluginRef="cordova.plugins.barcodeScanner",l.repo="https://github.com/phonegap/phonegap-plugin-barcodescanner",l.platforms=["Android","BlackBerry 10","Browser","iOS","Windows"],l}(I.IonicNativePlugin);e.d(l,"ReferralPageModuleNgFactory",function(){return P});var P=t.mb(d,[],function(n){return t.wb([t.xb(512,t.j,t.bb,[[8,[f.a,y]],[3,t.j],t.x]),t.xb(4608,k.l,k.k,[t.u,[2,k.s]]),t.xb(4608,v.n,v.n,[]),t.xb(4608,c.c,c.c,[t.z,t.g]),t.xb(4608,c.Hb,c.Hb,[c.c,t.j,t.q]),t.xb(4608,c.Kb,c.Kb,[c.c,t.j,t.q]),t.xb(4608,z,z,[]),t.xb(1073742336,k.b,k.b,[]),t.xb(1073742336,v.l,v.l,[]),t.xb(1073742336,v.c,v.c,[]),t.xb(1073742336,c.Eb,c.Eb,[]),t.xb(1073742336,r.o,r.o,[[2,r.u],[2,r.n]]),t.xb(1073742336,d,d,[]),t.xb(1024,r.l,function(){return[[{path:"",component:h}]]},[])])})},"56ai":function(n,l,e){"use strict";e.d(l,"a",function(){return u});var t=e("CcnG"),o=e("ZYCi"),u=function(){function n(n){this.router=n}return n.prototype.nextStep=function(n){switch(n){case"AddReferral":this.router.navigate(["referral"]);break;case"MakePayment":this.router.navigate(["top-up"]);break;case"CreatePassword":this.router.navigate(["change-password"]);break;case"VerifyEmail":this.router.navigate(["mail-confirmation"]);break;case"CompleteProfile":this.router.navigate(["complete-profile"]);break;case"VerifyProfile":this.router.navigate(["profile/profile/home"]);break;case"Password":this.router.navigate(["auth-password"]);break;case"Upline":break;case"ForgotPassword":this.router.navigate(["forgot-password"]);break;case"Phone":this.router.navigate(["auth-phone"]);break;case"OTP-ChangePassword":this.router.navigate(["otp-change-number"]);break;default:this.router.navigate(["profile/profile/home"])}},n.ngInjectableDef=t.S({factory:function(){return new n(t.W(o.n))},token:n,providedIn:"root"}),n}()},utPD:function(n,l,e){"use strict";e.d(l,"a",function(){return r});var t=e("mrSG"),o=e("ZZ/e"),u=e("CcnG"),r=function(){function n(n,l){this.alertController=n,this.loadingCntroller=l}return n.prototype.showErrorMessageAlert=function(n){return t.b(this,void 0,void 0,function(){return t.e(this,function(l){switch(l.label){case 0:return[4,this.alertController.create({header:"Jom-Save",message:n,buttons:["OK"]})];case 1:return[4,l.sent().present()];case 2:return l.sent(),[2]}})})},n.ngInjectableDef=u.S({factory:function(){return new n(u.W(o.b),u.W(o.Gb))},token:n,providedIn:"root"}),n}()}}]);