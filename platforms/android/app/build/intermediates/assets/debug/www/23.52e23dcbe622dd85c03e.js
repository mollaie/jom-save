(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"0uLW":function(l,n,u){"use strict";u.r(n);var e=u("CcnG"),o=u("mrSG"),t=u("e0iR"),r=u("ZYCi"),s=u("603S"),i=u("Zx/A"),a=u("56ai"),c=u("ZZ/e"),b=u("n6ga"),p=u("utPD"),h=function(){function l(l,n,u,e,o,t,s,i,a){var c=this;this.dataTransaction=l,this.router=n,this.zbar=u,this.api=e,this.routeProvider=o,this.platform=t,this.loading=s,this.restApi=i,this.alert=a,this.Model={Phone:"",Referral:"",ScannData:{}},this.UserInfo={UserId:0,DisplayName:"",Photo:"",Roles:""},this.ErrorMessage="",this.isDebug=!1,this.router.routeReuseStrategy.shouldReuseRoute=function(){return!1},n.events.subscribe(function(l){l instanceof r.d&&c.ngOnInit()}),this.zbarOptions={flash:"off",drawSight:!1},this.isDebug=!t.is("cordova")}return l.prototype.ngOnInit=function(){var l=this;this.dataTransaction.getUserPhone().then(function(n){null==n||""==n?l.router.navigate(["auth-phone"]):(l.Model.Phone=n.toString(),l.dataTransaction.getAccessToken().then(function(n){l.AccessToken=n.toString()}))})},l.prototype.doLogin=function(){this.router.navigate(["auth-phone"])},l.prototype.doNext=function(){this.doSetUpline()},l.prototype.doCancel=function(){this.router.navigate(["auth-phone"])},l.prototype.doForgotPassword=function(){},l.prototype.doSkip=function(){var l=this;this.isDebug?this.restApi.SetUpline("0",this.AccessToken).subscribe(function(n){var u=l.api.converResponseToJson(n);"0"==u.ErrorCode?l.routeProvider.nextStep(u.Data.NextStep):l.ErrorMessage=u.ErrorMessage},function(n){l.ErrorMessage=n}):this.api.SetUpline("0",this.AccessToken).then(function(n){var u=l.api.converResponseToJson(n.data);200==n.status?l.routeProvider.nextStep(u.Data.NextStep):l.alert.showErrorMessageAlert(u.ErrorMessage)},function(n){l.alert.showErrorMessageAlert(n),l.ErrorMessage=n})},l.prototype.doScanCode=function(){var l=this;this.zbar.scan(this.zbarOptions).then(function(n){l.Model.Referral=n,l.doGetUserInfo()}).catch(function(l){alert(l)})},l.prototype.doEncodedText=function(){},l.prototype.doGetUserInfo=function(){var l=this;""!=this.Model.Referral&&6==this.Model.Referral.length&&(this.isDebug?this.restApi.GetUserInfo(this.Model.Referral,this.AccessToken).subscribe(function(n){var u=l.restApi.converResponseToJson(n);console.log(u),"0"==u.ErrorCode?(l.presentLoading(),l.UserInfo=u.Data):(l.UserInfo={UserId:0,DisplayName:"",Photo:"",Roles:""},l.ErrorMessage="Member doesn't exist.")}):this.api.GetUserInfo(this.Model.Referral,this.AccessToken).then(function(n){var u=l.api.converResponseToJson(n.data);200==n.status?(l.presentLoading(),l.UserInfo=u.Data):(l.UserInfo={UserId:0,DisplayName:"",Photo:"",Roles:""},l.alert.showErrorMessageAlert(u.ErrorMessage))},function(n){l.UserInfo={UserId:0,DisplayName:"",Photo:"",Roles:""},l.alert.showErrorMessageAlert(n)}))},l.prototype.presentLoading=function(){return o.b(this,void 0,void 0,function(){return o.e(this,function(l){switch(l.label){case 0:return[4,this.loading.create({message:"Please wait",duration:500})];case 1:return[4,l.sent().present()];case 2:return l.sent(),[2]}})})},l.prototype.doSetUpline=function(){var l=this;0!=this.UserInfo.UserId&&(this.isDebug?this.api.SetUpline(this.UserInfo.UserId,this.AccessToken).then(function(n){var u=l.restApi.converResponseToJson(n);"0"==u.ErrorCode?l.routeProvider.nextStep(u.Data.NextStep):l.ErrorMessage=u.ErrorMessage},function(n){l.ErrorMessage=n}):this.api.SetUpline(this.UserInfo.UserId,this.AccessToken).then(function(n){var u=l.api.converResponseToJson(n.data);200==n.status?l.routeProvider.nextStep(u.Data.NextStep):l.alert.showErrorMessageAlert(u.ErrorMessage)},function(n){l.alert.showErrorMessageAlert(n)}))},l}(),f=function(){return function(){}}(),d=u("pMnS"),g=u("oBZk"),v=u("gIcY"),k=u("Ip0R"),w=e.nb({encapsulation:0,styles:[[""]],data:{}});function m(l){return e.Db(0,[(l()(),e.pb(0,0,null,null,13,"ion-row",[],null,null,null,g.S,g.s)),e.ob(1,49152,null,0,c.jb,[e.h,e.k],null,null),(l()(),e.pb(2,0,null,0,1,"ion-col",[["size","3"]],null,null,null,g.F,g.f)),e.ob(3,49152,null,0,c.u,[e.h,e.k],{size:[0,"size"]},null),(l()(),e.pb(4,0,null,0,3,"ion-col",[["class","text-center"],["size","6"],["style","padding-left:20px"]],null,null,null,g.F,g.f)),e.ob(5,49152,null,0,c.u,[e.h,e.k],{size:[0,"size"]},null),(l()(),e.pb(6,0,null,0,1,"div",[["class","picture-container text-center"]],null,null,null,null,null)),(l()(),e.pb(7,0,null,null,0,"img",[["height","150"],["width","150"]],[[8,"src",4]],null,null,null,null)),(l()(),e.pb(8,0,null,0,1,"ion-col",[["size","3"]],null,null,null,g.F,g.f)),e.ob(9,49152,null,0,c.u,[e.h,e.k],{size:[0,"size"]},null),(l()(),e.pb(10,0,null,0,3,"ion-col",[["size","12"]],null,null,null,g.F,g.f)),e.ob(11,49152,null,0,c.u,[e.h,e.k],{size:[0,"size"]},null),(l()(),e.pb(12,0,null,0,1,"p",[["class","text-center"]],null,null,null,null,null)),(l()(),e.Cb(13,null,[" Member Name : ",""]))],function(l,n){l(n,3,0,"3"),l(n,5,0,"6"),l(n,9,0,"3"),l(n,11,0,"12")},function(l,n){var u=n.component;l(n,7,0,u.UserInfo.Photo),l(n,13,0,u.UserInfo.DisplayName)})}function y(l){return e.Db(0,[(l()(),e.pb(0,0,null,null,1,"p",[["class","text-center"],["color","danger"]],null,null,null,null,null)),(l()(),e.Cb(1,null,["",""]))],null,function(l,n){l(n,1,0,n.component.ErrorMessage)})}function I(l){return e.Db(0,[(l()(),e.pb(0,0,null,null,3,"ion-header",[["no-border",""]],null,null,null,g.K,g.k)),e.ob(1,49152,null,0,c.C,[e.h,e.k],null,null),(l()(),e.pb(2,0,null,0,1,"ion-toolbar",[],null,null,null,g.Z,g.z)),e.ob(3,49152,null,0,c.Cb,[e.h,e.k],null,null),(l()(),e.pb(4,0,null,null,58,"ion-content",[],null,null,null,g.G,g.g)),e.ob(5,49152,null,0,c.v,[e.h,e.k],null,null),(l()(),e.pb(6,0,null,0,56,"div",[["class","container"]],null,null,null,null,null)),(l()(),e.pb(7,0,null,null,6,"ion-grid",[],null,null,null,g.J,g.j)),e.ob(8,49152,null,0,c.B,[e.h,e.k],null,null),(l()(),e.pb(9,0,null,0,4,"ion-row",[],null,null,null,g.S,g.s)),e.ob(10,49152,null,0,c.jb,[e.h,e.k],null,null),(l()(),e.pb(11,0,null,0,2,"ion-col",[],null,null,null,g.F,g.f)),e.ob(12,49152,null,0,c.u,[e.h,e.k],null,null),(l()(),e.pb(13,0,null,0,0,"div",[["class","logo"]],null,null,null,null,null)),(l()(),e.pb(14,0,null,null,7,"ion-grid",[],null,null,null,g.J,g.j)),e.ob(15,49152,null,0,c.B,[e.h,e.k],null,null),(l()(),e.pb(16,0,null,0,5,"ion-row",[],null,null,null,g.S,g.s)),e.ob(17,49152,null,0,c.jb,[e.h,e.k],null,null),(l()(),e.pb(18,0,null,0,3,"ion-col",[],null,null,null,g.F,g.f)),e.ob(19,49152,null,0,c.u,[e.h,e.k],null,null),(l()(),e.pb(20,0,null,0,1,"h3",[["class","warningMessage"]],null,null,null,null,null)),(l()(),e.Cb(-1,null,["Who is your Referral?"])),(l()(),e.pb(22,0,null,null,36,"ion-grid",[],null,null,null,g.J,g.j)),e.ob(23,49152,null,0,c.B,[e.h,e.k],null,null),(l()(),e.pb(24,0,null,0,20,"ion-row",[],null,null,null,g.S,g.s)),e.ob(25,49152,null,0,c.jb,[e.h,e.k],null,null),(l()(),e.pb(26,0,null,0,1,"ion-col",[["size","2"]],null,null,null,g.F,g.f)),e.ob(27,49152,null,0,c.u,[e.h,e.k],{size:[0,"size"]},null),(l()(),e.pb(28,0,null,0,14,"ion-col",[["size","8"]],null,null,null,g.F,g.f)),e.ob(29,49152,null,0,c.u,[e.h,e.k],{size:[0,"size"]},null),(l()(),e.pb(30,0,null,0,1,"p",[["class","text-center"]],null,null,null,null,null)),(l()(),e.Cb(-1,null,["Please key in your referral\u2019s REFID"])),(l()(),e.pb(32,0,null,0,10,"div",[["class","input-container"]],null,null,null,null,null)),(l()(),e.pb(33,0,null,null,0,"img",[["class","input--icon"],["src","../../assets/images/btn-scan-qr.svg"]],null,[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.doScanCode()&&e),e},null,null)),(l()(),e.pb(34,0,null,null,7,"input",[["class","input-icon"],["maxlength","6"],["type","text"]],[[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var o=!0,t=l.component;return"input"===n&&(o=!1!==e.yb(l,35)._handleInput(u.target.value)&&o),"blur"===n&&(o=!1!==e.yb(l,35).onTouched()&&o),"compositionstart"===n&&(o=!1!==e.yb(l,35)._compositionStart()&&o),"compositionend"===n&&(o=!1!==e.yb(l,35)._compositionEnd(u.target.value)&&o),"ngModelChange"===n&&(o=!1!==(t.Model.Referral=u)&&o),"input"===n&&(o=!1!==t.doGetUserInfo()&&o),o},null,null)),e.ob(35,16384,null,0,v.b,[e.D,e.k,[2,v.a]],null,null),e.ob(36,540672,null,0,v.d,[],{maxlength:[0,"maxlength"]},null),e.zb(1024,null,v.e,function(l){return[l]},[v.d]),e.zb(1024,null,v.f,function(l){return[l]},[v.b]),e.ob(39,671744,null,0,v.i,[[8,null],[6,v.e],[8,null],[6,v.f]],{model:[0,"model"]},{update:"ngModelChange"}),e.zb(2048,null,v.g,null,[v.i]),e.ob(41,16384,null,0,v.h,[[4,v.g]],null,null),(l()(),e.pb(42,0,null,null,0,"span",[["class","input-content"]],null,null,null,null,null)),(l()(),e.pb(43,0,null,0,1,"ion-col",[["size","2"]],null,null,null,g.F,g.f)),e.ob(44,49152,null,0,c.u,[e.h,e.k],{size:[0,"size"]},null),(l()(),e.gb(16777216,null,0,1,null,m)),e.ob(46,16384,null,0,k.i,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.pb(47,0,null,0,5,"ion-row",[],null,null,null,g.S,g.s)),e.ob(48,49152,null,0,c.jb,[e.h,e.k],null,null),(l()(),e.pb(49,0,null,0,3,"ion-col",[],null,null,null,g.F,g.f)),e.ob(50,49152,null,0,c.u,[e.h,e.k],null,null),(l()(),e.gb(16777216,null,0,1,null,y)),e.ob(52,16384,null,0,k.i,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.pb(53,0,null,0,5,"ion-row",[],null,null,null,g.S,g.s)),e.ob(54,49152,null,0,c.jb,[e.h,e.k],null,null),(l()(),e.pb(55,0,null,0,3,"ion-col",[["class","text-center"]],null,null,null,g.F,g.f)),e.ob(56,49152,null,0,c.u,[e.h,e.k],null,null),(l()(),e.pb(57,0,null,0,1,"a",[["class","text-center"]],null,[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.doSkip()&&e),e},null,null)),(l()(),e.Cb(-1,null,["Skip For Now"])),(l()(),e.pb(59,0,null,null,3,"ion-fab-button",[["class","next-button"]],null,[[null,"click"]],function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.doNext()&&e),e},g.I,g.i)),e.ob(60,49152,null,0,c.y,[e.h,e.k],null,null),(l()(),e.pb(61,0,null,0,1,"ion-icon",[["name","arrow-forward"]],null,null,null,g.L,g.l)),e.ob(62,49152,null,0,c.D,[e.h,e.k],{name:[0,"name"]},null)],function(l,n){var u=n.component;l(n,27,0,"2"),l(n,29,0,"8"),l(n,36,0,"6"),l(n,39,0,u.Model.Referral),l(n,44,0,"2"),l(n,46,0,u.UserInfo.UserId>0),l(n,52,0,""!=u.ErrorMessage),l(n,62,0,"arrow-forward")},function(l,n){l(n,34,0,e.yb(n,36).maxlength?e.yb(n,36).maxlength:null,e.yb(n,41).ngClassUntouched,e.yb(n,41).ngClassTouched,e.yb(n,41).ngClassPristine,e.yb(n,41).ngClassDirty,e.yb(n,41).ngClassValid,e.yb(n,41).ngClassInvalid,e.yb(n,41).ngClassPending)})}function M(l){return e.Db(0,[(l()(),e.pb(0,0,null,null,1,"app-referral",[],null,null,null,I,w)),e.ob(1,114688,null,0,h,[t.a,r.n,i.a,s.a,a.a,c.Jb,c.Gb,b.a,p.a],null,null)],function(l,n){l(n,1,0)},null)}var S=e.lb("app-referral",h,M,{},{},[]),U=u("zA0m");u.d(n,"ReferralPageModuleNgFactory",function(){return z});var z=e.mb(f,[],function(l){return e.vb([e.wb(512,e.j,e.bb,[[8,[d.a,S]],[3,e.j],e.x]),e.wb(4608,k.k,k.j,[e.u,[2,k.r]]),e.wb(4608,v.l,v.l,[]),e.wb(4608,c.c,c.c,[e.z,e.g]),e.wb(4608,c.Hb,c.Hb,[c.c,e.j,e.q]),e.wb(4608,c.Kb,c.Kb,[c.c,e.j,e.q]),e.wb(4608,U.a,U.a,[]),e.wb(1073742336,k.b,k.b,[]),e.wb(1073742336,v.j,v.j,[]),e.wb(1073742336,v.c,v.c,[]),e.wb(1073742336,c.Eb,c.Eb,[]),e.wb(1073742336,r.o,r.o,[[2,r.u],[2,r.n]]),e.wb(1073742336,f,f,[]),e.wb(1024,r.l,function(){return[[{path:"",component:h}]]},[])])})}}]);