(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"0uLW":function(n,l,e){"use strict";e.r(l);var u=e("CcnG"),o=e("mrSG"),t=e("e0iR"),r=e("ZYCi"),s=e("603S"),i=e("Zx/A"),a=e("56ai"),c=e("ZZ/e"),p=e("n6ga"),b=e("utPD"),h=function(){function n(n,l,e,u,o,t,s,i,a){var c=this;this.dataTransaction=n,this.router=l,this.zbar=e,this.api=u,this.routeProvider=o,this.platform=t,this.loading=s,this.restApi=i,this.alert=a,this.Model={Phone:"",Referral:"",ScannData:{}},this.UserInfo={UserId:0,DisplayName:"",Photo:"",Roles:""},this.ErrorMessage="",this.isDebug=!1,this.router.routeReuseStrategy.shouldReuseRoute=function(){return!1},l.events.subscribe(function(n){n instanceof r.d&&c.ngOnInit()}),this.zbarOptions={flash:"off",drawSight:!1},this.isDebug=!t.is("cordova")}return n.prototype.ngOnInit=function(){var n=this;this.dataTransaction.getUserPhone().then(function(l){null==l||""==l?n.router.navigate(["auth-phone"]):(n.Model.Phone=l.toString(),n.dataTransaction.getAccessToken().then(function(l){n.AccessToken=l.toString()}))})},n.prototype.doLogin=function(){this.router.navigate(["auth-phone"])},n.prototype.doNext=function(){this.doSetUpline()},n.prototype.doCancel=function(){this.router.navigate(["auth-phone"])},n.prototype.doForgotPassword=function(){},n.prototype.doSkip=function(){var n=this;this.isDebug?this.restApi.SetUpline("0",this.AccessToken).subscribe(function(l){var e=n.restApi.converResponseToJson(l);"0"==e.ErrorCode?n.routeProvider.nextStep(e.Data.NextStep):n.ErrorMessage=e.ErrorMessage},function(l){n.ErrorMessage=l}):this.api.SetUpline("0",this.AccessToken).then(function(l){var e=n.api.converResponseToJson(l.data);200==l.status?n.routeProvider.nextStep(e.Data.NextStep):n.alert.showErrorMessageAlert(e.ErrorMessage)},function(l){n.alert.showErrorMessageAlert(l),n.ErrorMessage=l})},n.prototype.doScanCode=function(){var n=this;this.zbar.scan(this.zbarOptions).then(function(l){n.Model.Referral=l,n.doGetUserInfo()}).catch(function(n){alert(n)})},n.prototype.doEncodedText=function(){},n.prototype.doGetUserInfo=function(){var n=this;""!=this.Model.Referral&&6==this.Model.Referral.length&&(this.isDebug?this.restApi.GetUserInfo(this.Model.Referral,this.AccessToken).subscribe(function(l){var e=n.restApi.converResponseToJson(l);console.log(e),"0"==e.ErrorCode?(n.presentLoading(),n.UserInfo=e.Data):(n.UserInfo={UserId:0,DisplayName:"",Photo:"",Roles:""},n.ErrorMessage="Member doesn't exist.")}):this.api.GetUserInfo(this.Model.Referral,this.AccessToken).then(function(l){var e=n.api.converResponseToJson(l.data);200==l.status?(n.presentLoading(),n.UserInfo=e.Data):(n.UserInfo={UserId:0,DisplayName:"",Photo:"",Roles:""},n.alert.showErrorMessageAlert(e.ErrorMessage))},function(l){n.UserInfo={UserId:0,DisplayName:"",Photo:"",Roles:""},n.alert.showErrorMessageAlert(l)}))},n.prototype.presentLoading=function(){return o.b(this,void 0,void 0,function(){return o.e(this,function(n){switch(n.label){case 0:return[4,this.loading.create({message:"Please wait",duration:500})];case 1:return[4,n.sent().present()];case 2:return n.sent(),[2]}})})},n.prototype.doSetUpline=function(){var n=this;0!=this.UserInfo.UserId&&(this.isDebug?this.api.SetUpline(this.UserInfo.UserId,this.AccessToken).then(function(l){var e=n.restApi.converResponseToJson(l);"0"==e.ErrorCode?n.routeProvider.nextStep(e.Data.NextStep):n.ErrorMessage=e.ErrorMessage},function(l){n.ErrorMessage=l}):this.api.SetUpline(this.UserInfo.UserId,this.AccessToken).then(function(l){var e=n.api.converResponseToJson(l.data);200==l.status?n.routeProvider.nextStep(e.Data.NextStep):n.alert.showErrorMessageAlert(e.ErrorMessage)},function(l){n.alert.showErrorMessageAlert(l)}))},n}(),f=function(){return function(){}}(),d=e("pMnS"),g=e("oBZk"),v=e("gIcY"),k=e("Ip0R"),m=u.nb({encapsulation:0,styles:[[""]],data:{}});function E(n){return u.Hb(0,[(n()(),u.pb(0,0,null,null,13,"ion-row",[],null,null,null,g.P,g.q)),u.ob(1,49152,null,0,c.jb,[u.h,u.k],null,null),(n()(),u.pb(2,0,null,0,1,"ion-col",[["size","3"]],null,null,null,g.E,g.f)),u.ob(3,49152,null,0,c.u,[u.h,u.k],{size:[0,"size"]},null),(n()(),u.pb(4,0,null,0,3,"ion-col",[["class","text-center"],["size","6"],["style","padding-left:20px"]],null,null,null,g.E,g.f)),u.ob(5,49152,null,0,c.u,[u.h,u.k],{size:[0,"size"]},null),(n()(),u.pb(6,0,null,0,1,"div",[["class","picture-container text-center"]],null,null,null,null,null)),(n()(),u.pb(7,0,null,null,0,"img",[["height","150"],["width","150"]],[[8,"src",4]],null,null,null,null)),(n()(),u.pb(8,0,null,0,1,"ion-col",[["size","3"]],null,null,null,g.E,g.f)),u.ob(9,49152,null,0,c.u,[u.h,u.k],{size:[0,"size"]},null),(n()(),u.pb(10,0,null,0,3,"ion-col",[["size","12"]],null,null,null,g.E,g.f)),u.ob(11,49152,null,0,c.u,[u.h,u.k],{size:[0,"size"]},null),(n()(),u.pb(12,0,null,0,1,"p",[["class","text-center"]],null,null,null,null,null)),(n()(),u.Fb(13,null,[" Member Name : ",""]))],function(n,l){n(l,3,0,"3"),n(l,5,0,"6"),n(l,9,0,"3"),n(l,11,0,"12")},function(n,l){var e=l.component;n(l,7,0,e.UserInfo.Photo),n(l,13,0,e.UserInfo.DisplayName)})}function I(n){return u.Hb(0,[(n()(),u.pb(0,0,null,null,1,"p",[["class","text-center"],["color","danger"]],null,null,null,null,null)),(n()(),u.Fb(1,null,["",""]))],null,function(n,l){n(l,1,0,l.component.ErrorMessage)})}function x(n){return u.Hb(0,[(n()(),u.pb(0,0,null,null,3,"ion-header",[["no-border",""]],null,null,null,g.J,g.k)),u.ob(1,49152,null,0,c.C,[u.h,u.k],null,null),(n()(),u.pb(2,0,null,0,1,"ion-toolbar",[],null,null,null,g.X,g.y)),u.ob(3,49152,null,0,c.Cb,[u.h,u.k],null,null),(n()(),u.pb(4,0,null,null,58,"ion-content",[["class","no-scroll content-background"]],null,null,null,g.F,g.g)),u.ob(5,49152,null,0,c.v,[u.h,u.k],null,null),(n()(),u.pb(6,0,null,0,56,"div",[["class","container"]],null,null,null,null,null)),(n()(),u.pb(7,0,null,null,6,"ion-grid",[],null,null,null,g.I,g.j)),u.ob(8,49152,null,0,c.B,[u.h,u.k],null,null),(n()(),u.pb(9,0,null,0,4,"ion-row",[],null,null,null,g.P,g.q)),u.ob(10,49152,null,0,c.jb,[u.h,u.k],null,null),(n()(),u.pb(11,0,null,0,2,"ion-col",[],null,null,null,g.E,g.f)),u.ob(12,49152,null,0,c.u,[u.h,u.k],null,null),(n()(),u.pb(13,0,null,0,0,"div",[["class","logo"]],null,null,null,null,null)),(n()(),u.pb(14,0,null,null,7,"ion-grid",[],null,null,null,g.I,g.j)),u.ob(15,49152,null,0,c.B,[u.h,u.k],null,null),(n()(),u.pb(16,0,null,0,5,"ion-row",[],null,null,null,g.P,g.q)),u.ob(17,49152,null,0,c.jb,[u.h,u.k],null,null),(n()(),u.pb(18,0,null,0,3,"ion-col",[],null,null,null,g.E,g.f)),u.ob(19,49152,null,0,c.u,[u.h,u.k],null,null),(n()(),u.pb(20,0,null,0,1,"h3",[["class","warningMessage"]],null,null,null,null,null)),(n()(),u.Fb(-1,null,["Who is your Referral?"])),(n()(),u.pb(22,0,null,null,36,"ion-grid",[],null,null,null,g.I,g.j)),u.ob(23,49152,null,0,c.B,[u.h,u.k],null,null),(n()(),u.pb(24,0,null,0,20,"ion-row",[],null,null,null,g.P,g.q)),u.ob(25,49152,null,0,c.jb,[u.h,u.k],null,null),(n()(),u.pb(26,0,null,0,1,"ion-col",[["size","2"]],null,null,null,g.E,g.f)),u.ob(27,49152,null,0,c.u,[u.h,u.k],{size:[0,"size"]},null),(n()(),u.pb(28,0,null,0,14,"ion-col",[["size","8"]],null,null,null,g.E,g.f)),u.ob(29,49152,null,0,c.u,[u.h,u.k],{size:[0,"size"]},null),(n()(),u.pb(30,0,null,0,1,"p",[["class","text-center"]],null,null,null,null,null)),(n()(),u.Fb(-1,null,["Please key in your referral\u2019s Member ID"])),(n()(),u.pb(32,0,null,0,10,"div",[["class","input-container"]],null,null,null,null,null)),(n()(),u.pb(33,0,null,null,0,"img",[["class","input--icon"],["src","../../assets/images/btn-scan-qr.svg"]],null,[[null,"click"]],function(n,l,e){var u=!0;return"click"===l&&(u=!1!==n.component.doScanCode()&&u),u},null,null)),(n()(),u.pb(34,0,null,null,7,"input",[["class","input-icon"],["maxlength","6"],["type","text"]],[[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,l,e){var o=!0,t=n.component;return"input"===l&&(o=!1!==u.zb(n,35)._handleInput(e.target.value)&&o),"blur"===l&&(o=!1!==u.zb(n,35).onTouched()&&o),"compositionstart"===l&&(o=!1!==u.zb(n,35)._compositionStart()&&o),"compositionend"===l&&(o=!1!==u.zb(n,35)._compositionEnd(e.target.value)&&o),"ngModelChange"===l&&(o=!1!==(t.Model.Referral=e)&&o),"input"===l&&(o=!1!==t.doGetUserInfo()&&o),o},null,null)),u.ob(35,16384,null,0,v.b,[u.D,u.k,[2,v.a]],null,null),u.ob(36,540672,null,0,v.d,[],{maxlength:[0,"maxlength"]},null),u.Cb(1024,null,v.e,function(n){return[n]},[v.d]),u.Cb(1024,null,v.f,function(n){return[n]},[v.b]),u.ob(39,671744,null,0,v.i,[[8,null],[6,v.e],[8,null],[6,v.f]],{model:[0,"model"]},{update:"ngModelChange"}),u.Cb(2048,null,v.g,null,[v.i]),u.ob(41,16384,null,0,v.h,[[4,v.g]],null,null),(n()(),u.pb(42,0,null,null,0,"span",[["class","input-content"]],null,null,null,null,null)),(n()(),u.pb(43,0,null,0,1,"ion-col",[["size","2"]],null,null,null,g.E,g.f)),u.ob(44,49152,null,0,c.u,[u.h,u.k],{size:[0,"size"]},null),(n()(),u.gb(16777216,null,0,1,null,E)),u.ob(46,16384,null,0,k.j,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(n()(),u.pb(47,0,null,0,5,"ion-row",[],null,null,null,g.P,g.q)),u.ob(48,49152,null,0,c.jb,[u.h,u.k],null,null),(n()(),u.pb(49,0,null,0,3,"ion-col",[],null,null,null,g.E,g.f)),u.ob(50,49152,null,0,c.u,[u.h,u.k],null,null),(n()(),u.gb(16777216,null,0,1,null,I)),u.ob(52,16384,null,0,k.j,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(n()(),u.pb(53,0,null,0,5,"ion-row",[],null,null,null,g.P,g.q)),u.ob(54,49152,null,0,c.jb,[u.h,u.k],null,null),(n()(),u.pb(55,0,null,0,3,"ion-col",[["class","text-center"]],null,null,null,g.E,g.f)),u.ob(56,49152,null,0,c.u,[u.h,u.k],null,null),(n()(),u.pb(57,0,null,0,1,"a",[["class","text-center"]],null,[[null,"click"]],function(n,l,e){var u=!0;return"click"===l&&(u=!1!==n.component.doSkip()&&u),u},null,null)),(n()(),u.Fb(-1,null,["Skip For Now"])),(n()(),u.pb(59,0,null,null,3,"ion-fab-button",[["class","next-button"]],null,[[null,"click"]],function(n,l,e){var u=!0;return"click"===l&&(u=!1!==n.component.doNext()&&u),u},g.H,g.i)),u.ob(60,49152,null,0,c.y,[u.h,u.k],null,null),(n()(),u.pb(61,0,null,0,1,"ion-icon",[["name","arrow-forward"]],null,null,null,g.K,g.l)),u.ob(62,49152,null,0,c.D,[u.h,u.k],{name:[0,"name"]},null)],function(n,l){var e=l.component;n(l,27,0,"2"),n(l,29,0,"8"),n(l,36,0,"6"),n(l,39,0,e.Model.Referral),n(l,44,0,"2"),n(l,46,0,e.UserInfo.UserId>0),n(l,52,0,""!=e.ErrorMessage),n(l,62,0,"arrow-forward")},function(n,l){n(l,34,0,u.zb(l,36).maxlength?u.zb(l,36).maxlength:null,u.zb(l,41).ngClassUntouched,u.zb(l,41).ngClassTouched,u.zb(l,41).ngClassPristine,u.zb(l,41).ngClassDirty,u.zb(l,41).ngClassValid,u.zb(l,41).ngClassInvalid,u.zb(l,41).ngClassPending)})}function M(n){return u.Hb(0,[(n()(),u.pb(0,0,null,null,1,"app-referral",[],null,null,null,x,m)),u.ob(1,114688,null,0,h,[t.a,r.n,i.a,s.a,a.a,c.Jb,c.Gb,p.a,b.a],null,null)],function(n,l){n(l,1,0)},null)}var P=u.lb("app-referral",h,M,{},{},[]),w=e("a3Cf"),S=function(n){function l(){var l=null!==n&&n.apply(this,arguments)||this;return l.Encode={TEXT_TYPE:"TEXT_TYPE",EMAIL_TYPE:"EMAIL_TYPE",PHONE_TYPE:"PHONE_TYPE",SMS_TYPE:"SMS_TYPE"},l}return Object(o.d)(l,n),l.prototype.scan=function(n){return Object(w.cordova)(this,"scan",{callbackOrder:"reverse"},arguments)},l.prototype.encode=function(n,l){return Object(w.cordova)(this,"encode",{},arguments)},l.pluginName="BarcodeScanner",l.plugin="phonegap-plugin-barcodescanner",l.pluginRef="cordova.plugins.barcodeScanner",l.repo="https://github.com/phonegap/phonegap-plugin-barcodescanner",l.platforms=["Android","BlackBerry 10","Browser","iOS","Windows"],l}(w.IonicNativePlugin);e.d(l,"ReferralPageModuleNgFactory",function(){return y});var y=u.mb(f,[],function(n){return u.wb([u.xb(512,u.j,u.bb,[[8,[d.a,P]],[3,u.j],u.x]),u.xb(4608,k.l,k.k,[u.u,[2,k.s]]),u.xb(4608,v.m,v.m,[]),u.xb(4608,c.c,c.c,[u.z,u.g]),u.xb(4608,c.Hb,c.Hb,[c.c,u.j,u.q]),u.xb(4608,c.Kb,c.Kb,[c.c,u.j,u.q]),u.xb(4608,S,S,[]),u.xb(1073742336,k.b,k.b,[]),u.xb(1073742336,v.k,v.k,[]),u.xb(1073742336,v.c,v.c,[]),u.xb(1073742336,c.Eb,c.Eb,[]),u.xb(1073742336,r.o,r.o,[[2,r.u],[2,r.n]]),u.xb(1073742336,f,f,[]),u.xb(1024,r.l,function(){return[[{path:"",component:h}]]},[])])})},"56ai":function(n,l,e){"use strict";e.d(l,"a",function(){return t});var u=e("CcnG"),o=e("ZYCi"),t=function(){function n(n){this.router=n}return n.prototype.nextStep=function(n){switch(n){case"AddReferral":this.router.navigate(["referral"]);break;case"MakePayment":this.router.navigate(["top-up"]);break;case"CreatePassword":this.router.navigate(["change-password"]);break;case"VerifyEmail":this.router.navigate(["mail-confirmation"]);break;case"CompleteProfile":this.router.navigate(["complete-profile"]);break;case"VerifyProfile":this.router.navigate(["profile/profile/home"]);break;case"Password":this.router.navigate(["auth-password"]);break;case"Upline":break;default:this.router.navigate(["profile/profile/home"])}},n.ngInjectableDef=u.S({factory:function(){return new n(u.W(o.n))},token:n,providedIn:"root"}),n}()},utPD:function(n,l,e){"use strict";e.d(l,"a",function(){return r});var u=e("mrSG"),o=e("ZZ/e"),t=e("CcnG"),r=function(){function n(n,l){this.alertController=n,this.loadingCntroller=l}return n.prototype.showErrorMessageAlert=function(n){return u.b(this,void 0,void 0,function(){return u.e(this,function(l){switch(l.label){case 0:return[4,this.alertController.create({header:"Jom-Save",message:n,buttons:["OK"]})];case 1:return[4,l.sent().present()];case 2:return l.sent(),[2]}})})},n.ngInjectableDef=t.S({factory:function(){return new n(t.W(o.b),t.W(o.Gb))},token:n,providedIn:"root"}),n}()}}]);