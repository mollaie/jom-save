(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"56ai":function(n,l,o){"use strict";o.d(l,"a",function(){return u});var t=o("CcnG"),e=o("ZYCi"),u=function(){function n(n){this.router=n}return n.prototype.nextStep=function(n){switch(n){case"AddReferral":this.router.navigate(["referral"]);break;case"MakePayment":this.router.navigate(["top-up"]);break;case"CreatePassword":this.router.navigate(["change-password"]);break;case"VerifyEmail":this.router.navigate(["mail-confirmation"]);break;case"CompleteProfile":this.router.navigate(["complete-profile"]);break;case"VerifyProfile":this.router.navigate(["profile/profile/home"]);break;case"Password":this.router.navigate(["auth-password"]);break;case"Upline":break;default:this.router.navigate(["profile/profile/home"])}},n.ngInjectableDef=t.S({factory:function(){return new n(t.W(e.n))},token:n,providedIn:"root"}),n}()},dtcG:function(n,l,o){"use strict";o.r(l);var t=o("CcnG"),e=o("mrSG"),u=o("e0iR"),r=o("603S"),i=o("ZZ/e"),s=o("utPD"),a=o("n6ga"),c=o("56ai"),b=function(){function n(n,l,o,t,e,u,r){var i=this;this.router=n,this.dataTransaction=l,this.api=o,this.platform=t,this.alert=e,this.restApi=u,this.routerProvider=r,this.AccessToken="",this.ErrorMessage="",this.BlockDuration=0,this.BlockDurationText="00:00",this.isUserHold=!1,this.isDebug=!1,this.Model={Phone:"",MailConfirmation:"",Resouses:{PhoneIcon:"",WorldPicture:"",PasswordIcon:"",ConfirmPassword:"",MailConfirmation:"",UserHold:""}},this.dataTransaction.getAccessToken().then(function(n){i.AccessToken=n}).catch(function(n){i.ErrorMessage="The system can not detect your corrent password. <br/> please log out and login again."}),this.isDebug=!t.is("cordova")}return n.prototype.ngOnInit=function(){var n=this;this.dataTransaction.getUserPhone().then(function(l){n.Model.Phone=l}).catch(function(l){n.alert.showErrorMessageAlert(l)})},n.prototype.doNext=function(){var n=this;this.isDebug?(this.dataTransaction.setEmail(this.Model.MailConfirmation),this.restApi.RequestEmailVerification(this.Model.MailConfirmation,this.AccessToken).subscribe(function(l){var o=n.restApi.converResponseToJson(l);"0"==o.ErrorCode?(n.BlockDuration=parseInt(o.Data.BlockDuration),n.doHoldUser()):n.ErrorMessage=o.ErrorMessage})):(this.dataTransaction.setEmail(this.Model.MailConfirmation),this.api.RequestEmailVerification(this.Model.MailConfirmation,this.AccessToken).then(function(l){if(200==l.status){var o=n.api.converResponseToJson(l.data);"0"==o.ErrorCode?(n.BlockDuration=parseInt(o.Data.BlockDuration),n.doHoldUser()):n.alert.showErrorMessageAlert(o.ErrorMessage)}else n.alert.showErrorMessageAlert(l.error)},function(l){n.alert.showErrorMessageAlert(l)}))},n.prototype.doHoldUser=function(){this.isUserHold=!0,this.countdown(),this.requestCountDown()},n.prototype.requestCountDown=function(){return e.b(this,void 0,void 0,function(){var n=this;return e.e(this,function(l){switch(l.label){case 0:return[4,setInterval(function(){n.doVerifyEmail()},5e3)];case 1:return l.sent(),[2]}})})},n.prototype.countdown=function(){return e.b(this,void 0,void 0,function(){var n=this;return e.e(this,function(l){switch(l.label){case 0:return[4,setTimeout(function(l){n.BlockDuration-=1,n.BlockDuration>0?(n.countdown(),n.BlockDurationText=n.parseTime(n.BlockDuration)):n.isUserHold=!1},1e3)];case 1:return l.sent(),[2]}})})},n.prototype.parseTime=function(n){var l;return(l=Math.round(n/60).toString())+":"+(n-60*parseInt(l)).toString()},n.prototype.doVerifyEmail=function(){var n=this;this.isDebug?this.restApi.GetProfile(this.AccessToken).subscribe(function(l){var o=n.restApi.converResponseToJson(l);"0"==o.ErrorCode&&"VerifyEmail"!=o.Data.NextStep&&(n.isUserHold=!1,n.BlockDuration=0,n.routerProvider.nextStep(o.Data.NextStep))}):this.api.GetProfile(this.AccessToken).then(function(l){if(200==l.status){var o=n.api.converResponseToJson(l.data);"VerifyEmail"!=o.Data.NextStep&&(n.isUserHold=!1,n.BlockDuration=0,n.routerProvider.nextStep(o.Data.NextStep))}else n.alert.showErrorMessageAlert(l.error)}).catch(function(l){return n.alert.showErrorMessageAlert(l)})},n.prototype.doLogin=function(){this.router.navigate(["auth-phone"])},n}(),p=function(){return function(){}}(),f=o("pMnS"),h=o("oBZk"),d=o("gIcY"),g=o("Ip0R"),m=o("yp2w"),k=o("uPsM"),v=o("ZYCi"),w=t.nb({encapsulation:0,styles:[[""]],data:{}});function C(n){return t.Hb(0,[(n()(),t.pb(0,0,null,null,1,"span",[["color","danger"]],null,null,null,null,null)),(n()(),t.Fb(1,null,["",""]))],null,function(n,l){n(l,1,0,l.component.ErrorMessage)})}function M(n){return t.Hb(0,[(n()(),t.pb(0,0,null,null,22,"ion-row",[["id","sendemail"]],null,null,null,h.P,h.q)),t.ob(1,49152,null,0,i.jb,[t.h,t.k],null,null),(n()(),t.pb(2,0,null,0,1,"ion-col",[["size","1"]],null,null,null,h.E,h.f)),t.ob(3,49152,null,0,i.u,[t.h,t.k],{size:[0,"size"]},null),(n()(),t.pb(4,0,null,0,2,"ion-col",[["size","2"]],null,null,null,h.E,h.f)),t.ob(5,49152,null,0,i.u,[t.h,t.k],{size:[0,"size"]},null),(n()(),t.pb(6,0,null,0,0,"img",[["src","../../assets/images/icon-email.svg"]],null,null,null,null,null)),(n()(),t.pb(7,0,null,0,13,"ion-col",[["size","7"]],null,null,null,h.E,h.f)),t.ob(8,49152,null,0,i.u,[t.h,t.k],{size:[0,"size"]},null),(n()(),t.pb(9,0,null,0,5,"input",[["class","forgot-password-input"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,l,o){var e=!0,u=n.component;return"input"===l&&(e=!1!==t.zb(n,10)._handleInput(o.target.value)&&e),"blur"===l&&(e=!1!==t.zb(n,10).onTouched()&&e),"compositionstart"===l&&(e=!1!==t.zb(n,10)._compositionStart()&&e),"compositionend"===l&&(e=!1!==t.zb(n,10)._compositionEnd(o.target.value)&&e),"ngModelChange"===l&&(e=!1!==(u.Model.MailConfirmation=o)&&e),e},null,null)),t.ob(10,16384,null,0,d.b,[t.D,t.k,[2,d.a]],null,null),t.Cb(1024,null,d.f,function(n){return[n]},[d.b]),t.ob(12,671744,null,0,d.i,[[8,null],[8,null],[8,null],[6,d.f]],{model:[0,"model"]},{update:"ngModelChange"}),t.Cb(2048,null,d.g,null,[d.i]),t.ob(14,16384,null,0,d.h,[[4,d.g]],null,null),(n()(),t.pb(15,0,null,0,3,"span",[["class","forgot-password-span"]],null,null,null,null,null)),(n()(),t.Fb(-1,null,["Please key in your email for "])),(n()(),t.pb(17,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),t.Fb(-1,null,[" verification purpose"])),(n()(),t.gb(16777216,null,0,1,null,C)),t.ob(20,16384,null,0,g.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.pb(21,0,null,0,1,"ion-col",[["size","2"]],null,null,null,h.E,h.f)),t.ob(22,49152,null,0,i.u,[t.h,t.k],{size:[0,"size"]},null)],function(n,l){var o=l.component;n(l,3,0,"1"),n(l,5,0,"2"),n(l,8,0,"7"),n(l,12,0,o.Model.MailConfirmation),n(l,20,0,""!=o.ErrorMessage),n(l,22,0,"2")},function(n,l){n(l,9,0,t.zb(l,14).ngClassUntouched,t.zb(l,14).ngClassTouched,t.zb(l,14).ngClassPristine,t.zb(l,14).ngClassDirty,t.zb(l,14).ngClassValid,t.zb(l,14).ngClassInvalid,t.zb(l,14).ngClassPending)})}function E(n){return t.Hb(0,[(n()(),t.pb(0,0,null,null,6,"ion-row",[],null,null,null,h.P,h.q)),t.ob(1,49152,null,0,i.jb,[t.h,t.k],null,null),(n()(),t.pb(2,0,null,0,4,"ion-col",[["class","text-center"]],null,null,null,h.E,h.f)),t.ob(3,49152,null,0,i.u,[t.h,t.k],null,null),(n()(),t.pb(4,0,null,0,0,"img",[["src","../../assets/images/stop.png"],["width","250"]],null,null,null,null,null)),(n()(),t.pb(5,0,null,0,1,"h4",[["class","text-center"]],null,null,null,null,null)),(n()(),t.Fb(6,null,["Waiting for email verified ",""]))],null,function(n,l){n(l,6,0,l.component.BlockDurationText)})}function D(n){return t.Hb(0,[(n()(),t.pb(0,0,null,null,3,"ion-fab-button",[["class","next-button"]],null,[[null,"click"]],function(n,l,o){var t=!0;return"click"===l&&(t=!1!==n.component.doNext()&&t),t},h.H,h.i)),t.ob(1,49152,null,0,i.y,[t.h,t.k],null,null),(n()(),t.pb(2,0,null,0,1,"ion-icon",[["name","arrow-forward"]],null,null,null,h.K,h.l)),t.ob(3,49152,null,0,i.D,[t.h,t.k],{name:[0,"name"]},null)],function(n,l){n(l,3,0,"arrow-forward")},null)}function y(n){return t.Hb(0,[(n()(),t.pb(0,0,null,null,3,"ion-header",[["no-border",""]],null,null,null,h.J,h.k)),t.ob(1,49152,null,0,i.C,[t.h,t.k],null,null),(n()(),t.pb(2,0,null,0,1,"ion-toolbar",[],null,null,null,h.X,h.y)),t.ob(3,49152,null,0,i.Cb,[t.h,t.k],null,null),(n()(),t.pb(4,0,null,null,15,"ion-content",[["class","no-scroll content-background"]],null,null,null,h.F,h.g)),t.ob(5,49152,null,0,i.v,[t.h,t.k],null,null),(n()(),t.pb(6,0,null,0,13,"div",[["class","container"]],null,null,null,null,null)),(n()(),t.pb(7,0,null,null,10,"ion-grid",[],null,null,null,h.I,h.j)),t.ob(8,49152,null,0,i.B,[t.h,t.k],null,null),(n()(),t.pb(9,0,null,0,4,"ion-row",[],null,null,null,h.P,h.q)),t.ob(10,49152,null,0,i.jb,[t.h,t.k],null,null),(n()(),t.pb(11,0,null,0,2,"ion-col",[],null,null,null,h.E,h.f)),t.ob(12,49152,null,0,i.u,[t.h,t.k],null,null),(n()(),t.pb(13,0,null,0,0,"div",[["class","logo"]],null,null,null,null,null)),(n()(),t.gb(16777216,null,0,1,null,M)),t.ob(15,16384,null,0,g.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.gb(16777216,null,0,1,null,E)),t.ob(17,16384,null,0,g.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(n()(),t.gb(16777216,null,null,1,null,D)),t.ob(19,16384,null,0,g.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],function(n,l){var o=l.component;n(l,15,0,!o.isUserHold),n(l,17,0,o.isUserHold),n(l,19,0,!o.isUserHold)},null)}function x(n){return t.Hb(0,[(n()(),t.pb(0,0,null,null,2,"app-mail-confirmation",[],null,null,null,y,w)),t.Cb(512,null,r.a,r.a,[m.a,i.Jb,k.a]),t.ob(2,114688,null,0,b,[v.n,u.a,r.a,i.Jb,s.a,a.a,c.a],null,null)],function(n,l){n(l,2,0)},null)}var P=t.lb("app-mail-confirmation",b,x,{},{},[]);o.d(l,"MailConfirmationPageModuleNgFactory",function(){return T});var T=t.mb(p,[],function(n){return t.wb([t.xb(512,t.j,t.bb,[[8,[f.a,P]],[3,t.j],t.x]),t.xb(4608,g.l,g.k,[t.u,[2,g.s]]),t.xb(4608,d.m,d.m,[]),t.xb(4608,i.c,i.c,[t.z,t.g]),t.xb(4608,i.Hb,i.Hb,[i.c,t.j,t.q]),t.xb(4608,i.Kb,i.Kb,[i.c,t.j,t.q]),t.xb(1073742336,g.b,g.b,[]),t.xb(1073742336,d.k,d.k,[]),t.xb(1073742336,d.c,d.c,[]),t.xb(1073742336,i.Eb,i.Eb,[]),t.xb(1073742336,v.o,v.o,[[2,v.u],[2,v.n]]),t.xb(1073742336,p,p,[]),t.xb(1024,v.l,function(){return[[{path:"",component:b}]]},[])])})},utPD:function(n,l,o){"use strict";o.d(l,"a",function(){return r});var t=o("mrSG"),e=o("ZZ/e"),u=o("CcnG"),r=function(){function n(n,l){this.alertController=n,this.loadingCntroller=l}return n.prototype.showErrorMessageAlert=function(n){return t.b(this,void 0,void 0,function(){return t.e(this,function(l){switch(l.label){case 0:return[4,this.alertController.create({header:"Jom-Save",message:n,buttons:["OK"]})];case 1:return[4,l.sent().present()];case 2:return l.sent(),[2]}})})},n.ngInjectableDef=u.S({factory:function(){return new n(u.W(e.b),u.W(e.Gb))},token:n,providedIn:"root"}),n}()}}]);