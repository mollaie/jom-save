(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{pyeQ:function(e,t,r){"use strict";r.r(t);var n=r("CcnG"),o=r("HBAR"),a=r("n6ga"),l=r("cxbk"),s=r("e0iR"),i=r("ZYCi"),u=r("ZZ/e"),c=r("603S"),d=function(){function e(e,t,r,n,o,a){var l=this;this.themeableBrowser=e,this.restApi=t,this.api=r,this.router=n,this.dataTransaction=o,this.platform=a,this.AccessToken="",this.ErrorMessage="",this.orderType="",this.cardNo="",this.securityCode="",this.epMonth="",this.epYear="",this.cardHolder="",this.isMethodCalled=!1,this.isDebug=!1,this.isScriptExecuted=!1,this.router.routeReuseStrategy.shouldReuseRoute=function(){return!1},n.events.subscribe(function(e){e instanceof i.d&&l.ngOnInit()}),this.orderType=n.getCurrentNavigation().extras.state.orderType,this.securityCode=n.getCurrentNavigation().extras.state.securityCode,this.cardNo=n.getCurrentNavigation().extras.state.cardNo,this.cardHolder=n.getCurrentNavigation().extras.state.cardHolder,this.epYear=n.getCurrentNavigation().extras.state.expireDate.substring(0,4),this.epMonth=n.getCurrentNavigation().extras.state.expireDate.replace(this.epYear+"-",""),this.isDebug=!a.is("cordova")}return e.prototype.ngOnInit=function(){var e=this;this.dataTransaction.getAccessToken().then(function(t){null==t?console.log("access token does not detected"):(e.AccessToken=t.toString(),e.createOrder())})},e.prototype.createOrder=function(){var e=this;this.isMethodCalled||(this.isMethodCalled=!0,this.isDebug?this.restApi.CreateOrder(this.orderType,l.a.orderAmount,this.AccessToken).subscribe(function(t){console.log(t);var r=e.api.converResponseToJson(t);null!=r&&0==r.ErrorCode?e.createPaymentForm({MerchantId:r.Data.MerchantId,amount:l.a.orderAmount,orderRef:r.Data.OrderRef,successUrl:r.Data.SuccessUrl,failUrl:r.Data.FailUrl,errorUrl:r.Data.ErrorUrl,Hash:r.Data.Hash,Lang:"E",paymentType:"N",currCode:"",payType:"",remark:"",cardNo:e.cardNo,securityCode:e.securityCode,epMonth:e.epMonth,epYear:e.epYear,cardHolder:e.cardHolder,pMethod:e.orderType}):e.ErrorMessage=r.ErrorMessage},function(e){}):this.api.CreateOrder(this.orderType,l.a.orderAmount,this.AccessToken).then(function(t){console.log(t);var r=e.api.converResponseToJson(t.data);null!=r&&0==r.ErrorCode?e.createPaymentForm({merchantId:r.Data.MerchantId,amount:l.a.orderAmount,orderRef:r.Data.OrderRef,successUrl:r.Data.SuccessUrl,failUrl:r.Data.FailUrl,errorUrl:r.Data.ErrorUrl,secureHash:r.Data.Hash,lang:"E",currCode:"458",payType:"N",remark:"JOMSAVE_KSJOA01B3YHD7dUS5CXX01HD6X64P0B1QDD",cardNo:e.cardNo,securityCode:e.securityCode,epMonth:e.epMonth,epYear:e.epYear,cardHolder:e.cardHolder,pMethod:"VISA"}):e.ErrorMessage=r.ErrorMessage},function(e){}))},e.prototype.createPaymentForm=function(e){var t=this,r='var form = document.createElement("form");';for(var n in r+='form.method="post";',r+='form.setAttribute("action","https://test.paydollar.com/b2cDemo/eng/dPayment/payComp.jsp");',e)r+="var "+n+'hiddenField = document.createElement("input");',r+=n+'hiddenField.setAttribute("type", "hidden");',r+=n+'hiddenField.setAttribute("name","'+n+'");',r+=n+'hiddenField.setAttribute("value","'+e[n]+'");',r+="form.appendChild("+n+"hiddenField);";r+="document.body.appendChild(form);",r+="form.submit();";try{var o=this.themeableBrowser.create("https://member.jomsave.com/Home/TutorialSlides","_blank",{toolbar:{height:44,color:"#fbb03b"},title:{color:"#ffffffff",showPageTitle:!0,staticText:"JomSave"},backButton:{image:"back",imagePressed:"back_pressed",align:"left",event:"backPressed"},forwardButton:{image:"forward",imagePressed:"forward_pressed",align:"left",event:"forwardPressed"},closeButton:{image:"close",imagePressed:"close_pressed",align:"left",event:"closePressed"},backButtonCanClose:!1});o.on("closePressed").subscribe(function(e){o.close(),t.isMethodCalled=!1}),o.on("exit").subscribe(function(e){alert(e.url)}),o.on("loadstop").subscribe(function(e){t.isScriptExecuted||o.executeScript({code:r}).then(function(e){t.isScriptExecuted=!0})}),o.on("event_getURL").subscribe(function(e){alert("event")})}catch(a){alert(a)}},e}(),b=function(){return function(){}}(),p=r("pMnS"),h=r("oBZk"),f=n.nb({encapsulation:0,styles:[[""]],data:{}});function m(e){return n.Hb(0,[(e()(),n.pb(0,0,null,null,8,"ion-header",[["no-border",""]],null,null,null,h.M,h.k)),n.ob(1,49152,null,0,u.C,[n.h,n.k],null,null),(e()(),n.pb(2,0,null,0,6,"ion-toolbar",[],null,null,null,h.db,h.B)),n.ob(3,49152,null,0,u.Cb,[n.h,n.k],null,null),(e()(),n.pb(4,0,null,0,4,"ion-buttons",[],null,null,null,h.F,h.d)),n.ob(5,49152,null,0,u.m,[n.h,n.k],null,null),(e()(),n.pb(6,0,null,0,2,"ion-back-button",[],null,[[null,"click"]],function(e,t,r){var o=!0;return"click"===t&&(o=!1!==n.zb(e,8).onClick(r)&&o),o},h.D,h.b)),n.ob(7,49152,null,0,u.h,[n.h,n.k],null,null),n.ob(8,16384,null,0,u.i,[[2,u.ib],u.Ib],null,null),(e()(),n.pb(9,0,null,null,1,"ion-content",[],null,null,null,h.H,h.f)),n.ob(10,49152,null,0,u.v,[n.h,n.k],null,null)],null,null)}function g(e){return n.Hb(0,[(e()(),n.pb(0,0,null,null,1,"app-top-up-viewer",[],null,null,null,m,f)),n.ob(1,114688,null,0,d,[o.a,a.a,c.a,i.n,s.a,u.Jb],null,null)],function(e,t){e(t,1,0)},null)}var v=n.lb("app-top-up-viewer",d,g,{},{},[]),y=r("Ip0R"),C=r("gIcY");r.d(t,"TopUpViewerPageModuleNgFactory",function(){return k});var k=n.mb(b,[],function(e){return n.wb([n.xb(512,n.j,n.bb,[[8,[p.a,v]],[3,n.j],n.x]),n.xb(4608,y.l,y.k,[n.u,[2,y.s]]),n.xb(4608,C.n,C.n,[]),n.xb(4608,u.c,u.c,[n.z,n.g]),n.xb(4608,u.Hb,u.Hb,[u.c,n.j,n.q]),n.xb(4608,u.Kb,u.Kb,[u.c,n.j,n.q]),n.xb(1073742336,y.b,y.b,[]),n.xb(1073742336,C.l,C.l,[]),n.xb(1073742336,C.c,C.c,[]),n.xb(1073742336,u.Eb,u.Eb,[]),n.xb(1073742336,i.o,i.o,[[2,i.u],[2,i.n]]),n.xb(1073742336,b,b,[]),n.xb(1024,i.l,function(){return[[{path:"",component:d}]]},[])])})}}]);