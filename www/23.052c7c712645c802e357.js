(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"56ai":function(l,n,e){"use strict";e.d(n,"a",function(){return r});var t=e("CcnG"),o=e("ZYCi"),r=function(){function l(l){this.router=l}return l.prototype.nextStep=function(l){switch(l){case"AddReferral":this.router.navigate(["referral"]);break;case"MakePayment":this.router.navigate(["top-up"]);break;case"CreatePassword":this.router.navigate(["change-password"]);break;case"VerifyEmail":this.router.navigate(["mail-confirmation"]);break;case"CompleteProfile":this.router.navigate(["complete-profile"]);break;case"VerifyProfile":this.router.navigate(["profile/profile/home"]);break;case"Password":this.router.navigate(["auth-password"]);break;case"Upline":break;case"ForgotPassword":this.router.navigate(["forgot-password"]);break;case"Phone":this.router.navigate(["auth-phone"]);break;case"OTP-ChangePassword":this.router.navigate(["otp-change-number"]);break;default:this.router.navigate(["profile/profile/home"])}},l.ngInjectableDef=t.S({factory:function(){return new l(t.W(o.n))},token:l,providedIn:"root"}),l}()},bzfP:function(l,n,e){"use strict";e.r(n);var t=e("CcnG"),o=e("mrSG"),r=e("e0iR"),u=e("BoD5"),i=e("ZYCi"),s=e("ZZ/e"),a=e("n6ga"),c=e("603S"),b=e("HBAR"),p=e("56ai"),d=e("utPD"),h=e("AytR"),f=function(){function l(l,n,e,t,o,r,u,s,a){var c=this;this.router=l,this.dataTransaction=n,this.restApi=e,this.api=t,this.platform=o,this.themeableBrowser=r,this.routerProvider=u,this.constantService=s,this.alert=a,this.Model={Phone:"",CreditCard:"",ExpireDate:"",CVV:"",Name:""},this.AccessToken="",this.ErrorMessage="",this.isMethodCalled=!1,this.isDebug=!1,this.isScriptExecuted=!1,this.isStillHold=!1,l.events.subscribe(function(l){l instanceof i.d&&c.ngOnInit()})}return l.prototype.ngOnInit=function(){var l=this;this.dataTransaction.getAccessToken().then(function(n){null==n?console.log("access token does not detected"):l.AccessToken=n.toString()})},l.prototype.doLogin=function(){this.router.navigate(["auth-phone"])},l.prototype.doNext=function(){},l.prototype.doCredit=function(){this.router.navigate(["top-up-account-info"])},l.prototype.doBank=function(){this.createOrder()},l.prototype.doSkip=function(){console.log("skip clicked"),this.router.navigate(["change-password"])},l.prototype.createOrder=function(){var l=this;if(!this.isMethodCalled){this.isMethodCalled=!0;var n=this.Model.ExpireDate.substring(0,4),e=this.Model.ExpireDate.replace(n+"-","");this.isDebug?this.restApi.CreateOrder("Subscription",h.a.orderAmount,this.AccessToken).subscribe(function(t){console.log(t);var o=l.restApi.converResponseToJson(t);if(null!=o&&0==o.ErrorCode){var r=l.createModel(o.Data,e,n);l.createPaymentForm(r)}else l.ErrorMessage=o.ErrorMessage},function(l){}):this.api.CreateOrder("Subscription",h.a.orderAmount,this.AccessToken).then(function(t){if(200==t.status){var o=l.api.converResponseToJson(t.data);if(null!=o&&0==o.ErrorCode){var r=l.createModel(o.Data,e,n);l.createPaymentForm(r)}else l.alert.showErrorMessageAlert("API Error = "+o.ErrorMessage)}}).catch(function(n){l.alert.showErrorMessageAlert("System Error "+n)})}},l.prototype.createModel=function(l,n,e){var t={merchantId:l.MerchantId,amount:h.a.orderAmount,orderRef:l.OrderRef,successUrl:l.SuccessUrl,failUrl:l.FailUrl,errorUrl:l.ErrorUrl,secureHash:l.Hash,lang:"E",currCode:"458",payType:"N",remark:"JOMSAVE_KSJOA01B3YHD7dUS5CXX01HD6X64P0B1QDD",cardNo:"",securityCode:"",epMonth:"",epYear:"",cardHolder:"",pMethod:"MYCLEAR"};return this.alert.showErrorMessageAlert(JSON.stringify(t)),t},l.prototype.createPaymentForm=function(l){var n=this,e='var form = document.createElement("form");';for(var t in e+='form.method="post";',e+='form.setAttribute("action","https://test.paydollar.com/b2cDemo/eng/dPayment/payComp.jsp");',l)e+="var "+t+'hiddenField = document.createElement("input");',e+=t+'hiddenField.setAttribute("type", "hidden");',e+=t+'hiddenField.setAttribute("name","'+t+'");',e+=t+'hiddenField.setAttribute("value","'+l[t]+'");',e+="form.appendChild("+t+"hiddenField);";e+="document.body.appendChild(form);",e+="form.submit();";try{var o=this.themeableBrowser.create("https://member-stage.jomsave.com//Home/EmptyView","_blank",{toolbar:{height:44,color:"#fbb03b"},title:{color:"#ffffffff",showPageTitle:!0,staticText:"JomSave"},closeButton:{wwwImage:"assets/images/Close.png",align:"left",event:"closePressed"},backButtonCanClose:!1});o.on("closePressed").subscribe(function(l){o.close(),n.isMethodCalled=!1}),o.on("exit").subscribe(function(l){n.isStillHold=!0,n.isMethodCalled=!1,n.doCallGetProfile()}),o.on("loadstop").subscribe(function(l){n.isScriptExecuted||o.executeScript({code:e}).then(function(l){n.isScriptExecuted=!0})})}catch(r){this.alert.showErrorMessageAlert(r)}},l.prototype.doCallGetProfile=function(){var l=this;setTimeout(function(){l.isStillHold&&l.doGetProfile()},5e3)},l.prototype.doGetProfile=function(){return o.b(this,void 0,void 0,function(){var l=this;return o.e(this,function(n){switch(n.label){case 0:return this.isDebug?[3,2]:[4,this.api.GetProfile(this.AccessToken).then(function(n){if(200==n.status){l.isStillHold=!1;var e=l.api.converResponseToJson(n.data);l.dataTransaction.setProfile(e.Data),l.routerProvider.nextStep(e.Data.NextStep)}}).catch(function(n){l.alert.showErrorMessageAlert(n)})];case 1:return n.sent(),[3,4];case 2:return[4,this.restApi.GetProfile(this.AccessToken).subscribe(function(n){var e=l.restApi.converResponseToJson(n);null!=e?(l.isStillHold=!1,l.dataTransaction.setProfile(e.Data),l.routerProvider.nextStep(e.Data.NextStep)):l.ErrorMessage=e.ErrorMessage})];case 3:n.sent(),n.label=4;case 4:return[2]}})})},l}(),g=function(){return function(){}}(),m=e("pMnS"),k=e("oBZk"),v=t.nb({encapsulation:0,styles:[[""]],data:{}});function w(l){return t.Hb(0,[(l()(),t.pb(0,0,null,null,7,"ion-header",[["no-border",""]],null,null,null,k.M,k.k)),t.ob(1,49152,null,0,s.C,[t.h,t.k],null,null),(l()(),t.pb(2,0,null,0,5,"ion-toolbar",[],null,null,null,k.db,k.B)),t.ob(3,49152,null,0,s.Cb,[t.h,t.k],null,null),(l()(),t.pb(4,0,null,0,3,"ion-buttons",[["slot","end"]],null,null,null,k.F,k.d)),t.ob(5,49152,null,0,s.m,[t.h,t.k],null,null),(l()(),t.pb(6,0,null,0,1,"a",[["class","Login-Link"],["slot","end"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.doLogin()&&t),t},null,null)),(l()(),t.Fb(-1,null,[" Cancel"])),(l()(),t.pb(8,0,null,null,53,"ion-content",[],null,null,null,k.H,k.f)),t.ob(9,49152,null,0,s.v,[t.h,t.k],null,null),(l()(),t.pb(10,0,null,0,51,"div",[["class","container"]],null,null,null,null,null)),(l()(),t.pb(11,0,null,null,50,"ion-grid",[["style","position: fixed;width: 100%;z-index: 200"]],null,null,null,k.L,k.j)),t.ob(12,49152,null,0,s.B,[t.h,t.k],null,null),(l()(),t.pb(13,0,null,0,4,"ion-row",[],null,null,null,k.U,k.s)),t.ob(14,49152,null,0,s.jb,[t.h,t.k],null,null),(l()(),t.pb(15,0,null,0,2,"ion-col",[],null,null,null,k.G,k.e)),t.ob(16,49152,null,0,s.u,[t.h,t.k],null,null),(l()(),t.pb(17,0,null,0,0,"div",[["class","logo"]],null,null,null,null,null)),(l()(),t.pb(18,0,null,0,5,"ion-row",[],null,null,null,k.U,k.s)),t.ob(19,49152,null,0,s.jb,[t.h,t.k],null,null),(l()(),t.pb(20,0,null,0,3,"ion-col",[],null,null,null,k.G,k.e)),t.ob(21,49152,null,0,s.u,[t.h,t.k],null,null),(l()(),t.pb(22,0,null,0,1,"h3",[["class","warningMessage"]],null,null,null,null,null)),(l()(),t.Fb(-1,null,["RM100 Membership"])),(l()(),t.pb(24,0,null,0,9,"ion-row",[],null,null,null,k.U,k.s)),t.ob(25,49152,null,0,s.jb,[t.h,t.k],null,null),(l()(),t.pb(26,0,null,0,1,"ion-col",[["size","2"]],null,null,null,k.G,k.e)),t.ob(27,49152,null,0,s.u,[t.h,t.k],{size:[0,"size"]},null),(l()(),t.pb(28,0,null,0,3,"ion-col",[["size","8"]],null,null,null,k.G,k.e)),t.ob(29,49152,null,0,s.u,[t.h,t.k],{size:[0,"size"]},null),(l()(),t.pb(30,0,null,0,1,"p",[["class","text-center"]],null,null,null,null,null)),(l()(),t.Fb(-1,null,["Please select a payment method:"])),(l()(),t.pb(32,0,null,0,1,"ion-col",[["size","2"]],null,null,null,k.G,k.e)),t.ob(33,49152,null,0,s.u,[t.h,t.k],{size:[0,"size"]},null),(l()(),t.pb(34,0,null,0,27,"ion-row",[],null,null,null,k.U,k.s)),t.ob(35,49152,null,0,s.jb,[t.h,t.k],null,null),(l()(),t.pb(36,0,null,0,25,"ion-col",[],null,null,null,k.G,k.e)),t.ob(37,49152,null,0,s.u,[t.h,t.k],null,null),(l()(),t.pb(38,0,null,0,11,"div",[["class","creditcard"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.doCredit()&&t),t},null,null)),(l()(),t.pb(39,0,null,null,10,"ion-grid",[],null,null,null,k.L,k.j)),t.ob(40,49152,null,0,s.B,[t.h,t.k],null,null),(l()(),t.pb(41,0,null,0,8,"ion-row",[],null,null,null,k.U,k.s)),t.ob(42,49152,null,0,s.jb,[t.h,t.k],null,null),(l()(),t.pb(43,0,null,0,2,"ion-col",[["size","6"]],null,null,null,k.G,k.e)),t.ob(44,49152,null,0,s.u,[t.h,t.k],{size:[0,"size"]},null),(l()(),t.pb(45,0,null,0,0,"img",[["height","100"],["src","../../assets/images/btn-credit-card-active.svg"],["width","130"]],null,null,null,null,null)),(l()(),t.pb(46,0,null,0,3,"ion-col",[["size","6"]],null,null,null,k.G,k.e)),t.ob(47,49152,null,0,s.u,[t.h,t.k],{size:[0,"size"]},null),(l()(),t.pb(48,0,null,0,1,"h3",[["class","text-center creditcard-text"]],null,null,null,null,null)),(l()(),t.Fb(-1,null,["Credit Card"])),(l()(),t.pb(50,0,null,0,11,"div",[["class","onlinebanking"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.doBank()&&t),t},null,null)),(l()(),t.pb(51,0,null,null,10,"ion-grid",[],null,null,null,k.L,k.j)),t.ob(52,49152,null,0,s.B,[t.h,t.k],null,null),(l()(),t.pb(53,0,null,0,8,"ion-row",[],null,null,null,k.U,k.s)),t.ob(54,49152,null,0,s.jb,[t.h,t.k],null,null),(l()(),t.pb(55,0,null,0,2,"ion-col",[["size","6"]],null,null,null,k.G,k.e)),t.ob(56,49152,null,0,s.u,[t.h,t.k],{size:[0,"size"]},null),(l()(),t.pb(57,0,null,0,0,"img",[["height","100"],["src","../../assets/images/btn-bank-inactive.svg"],["width","130"]],null,null,null,null,null)),(l()(),t.pb(58,0,null,0,3,"ion-col",[["size","6"]],null,null,null,k.G,k.e)),t.ob(59,49152,null,0,s.u,[t.h,t.k],{size:[0,"size"]},null),(l()(),t.pb(60,0,null,0,1,"h3",[["class","text-center onlinebanking-text"]],null,null,null,null,null)),(l()(),t.Fb(-1,null,["Online Banking"]))],function(l,n){l(n,27,0,"2"),l(n,29,0,"8"),l(n,33,0,"2"),l(n,44,0,"6"),l(n,47,0,"6"),l(n,56,0,"6"),l(n,59,0,"6")},null)}function C(l){return t.Hb(0,[(l()(),t.pb(0,0,null,null,1,"app-top-up",[],null,null,null,w,v)),t.ob(1,114688,null,0,f,[i.n,r.a,a.a,c.a,s.Jb,b.a,p.a,u.a,d.a],null,null)],function(l,n){l(n,1,0)},null)}var y=t.lb("app-top-up",f,C,{},{},[]),x=e("Ip0R"),M=e("gIcY");e.d(n,"TopUpPageModuleNgFactory",function(){return P});var P=t.mb(g,[],function(l){return t.wb([t.xb(512,t.j,t.bb,[[8,[m.a,y]],[3,t.j],t.x]),t.xb(4608,x.l,x.k,[t.u,[2,x.s]]),t.xb(4608,M.n,M.n,[]),t.xb(4608,s.c,s.c,[t.z,t.g]),t.xb(4608,s.Hb,s.Hb,[s.c,t.j,t.q]),t.xb(4608,s.Kb,s.Kb,[s.c,t.j,t.q]),t.xb(1073742336,x.b,x.b,[]),t.xb(1073742336,M.l,M.l,[]),t.xb(1073742336,M.c,M.c,[]),t.xb(1073742336,s.Eb,s.Eb,[]),t.xb(1073742336,i.o,i.o,[[2,i.u],[2,i.n]]),t.xb(1073742336,g,g,[]),t.xb(1024,i.l,function(){return[[{path:"",component:f}]]},[])])})},utPD:function(l,n,e){"use strict";e.d(n,"a",function(){return u});var t=e("mrSG"),o=e("ZZ/e"),r=e("CcnG"),u=function(){function l(l,n){this.alertController=l,this.loadingCntroller=n}return l.prototype.showErrorMessageAlert=function(l){return t.b(this,void 0,void 0,function(){return t.e(this,function(n){switch(n.label){case 0:return[4,this.alertController.create({header:"Jom-Save",message:l,buttons:["OK"]})];case 1:return[4,n.sent().present()];case 2:return n.sent(),[2]}})})},l.ngInjectableDef=r.S({factory:function(){return new l(r.W(o.b),r.W(o.Gb))},token:l,providedIn:"root"}),l}()}}]);