(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"56ai":function(l,n,e){"use strict";e.d(n,"a",function(){return r});var t=e("CcnG"),o=e("ZYCi"),r=function(){function l(l){this.router=l}return l.prototype.nextStep=function(l){switch(l){case"AddReferral":this.router.navigate(["referral"]);break;case"MakePayment":this.router.navigate(["top-up"]);break;case"CreatePassword":this.router.navigate(["change-password"]);break;case"VerifyEmail":this.router.navigate(["mail-confirmation"]);break;case"CompleteProfile":this.router.navigate(["complete-profile"]);break;case"VerifyProfile":this.router.navigate(["profile/profile/home"]);break;case"Password":this.router.navigate(["auth-password"]);break;case"Upline":break;case"ForgotPassword":this.router.navigate(["forgot-password"]);break;case"Phone":this.router.navigate(["auth-phone"]);break;default:this.router.navigate(["profile/profile/home"])}},l.ngInjectableDef=t.S({factory:function(){return new l(t.W(o.n))},token:l,providedIn:"root"}),l}()},EMNk:function(l,n,e){"use strict";e.r(n);var t=e("CcnG"),o=e("mrSG"),r=e("e0iR"),u=e("BoD5"),i=e("ZZ/e"),a=e("cxbk"),s=e("HBAR"),d=e("n6ga"),c=e("603S"),b=e("56ai"),h=e("utPD"),p=function(){function l(l,n,e,t,o,r,u,i,a,s){this.router=l,this.dataTransaction=n,this.restApi=e,this.api=t,this.platform=o,this.themeableBrowser=r,this.routerProvider=u,this.constantService=i,this.alert=a,this.loadingController=s,this.Model={Phone:"",CreditCard:"",ExpireDate:"",CVV:"",Name:""},this.AccessToken="",this.ErrorMessage="",this.isMethodCalled=!1,this.isDebug=!1,this.isScriptExecuted=!1,this.isStillHold=!1,this.CardTypeResource="",this.showCard=!1,this.router.routeReuseStrategy.shouldReuseRoute=function(){return!1},this.isDebug=!o.is("cordova"),this.Model.ExpireDate="2020-07"}return l.prototype.ngOnInit=function(){var l=this;this.dataTransaction.getAccessToken().then(function(n){null==n?console.log("access token does not detected"):l.AccessToken=n.toString()})},l.prototype.doLogin=function(){this.router.navigate(["auth-phone"])},l.prototype.doNext=function(){this.doValidation()&&this.createOrder()},l.prototype.createOrder=function(){var l=this;if(!this.isMethodCalled){this.isMethodCalled=!0;var n=this.Model.ExpireDate.substring(0,4),e=this.Model.ExpireDate.replace(n+"-","");this.isDebug?this.restApi.CreateOrder("Subscription",a.a.orderAmount,this.AccessToken).subscribe(function(t){console.log(t);var o=l.restApi.converResponseToJson(t);if(null!=o&&0==o.ErrorCode){var r=l.createModel(o.Data,e,n);l.createPaymentForm(r)}else l.ErrorMessage=o.ErrorMessage},function(l){}):this.api.CreateOrder("Subscription",a.a.orderAmount,this.AccessToken).then(function(t){if(200==t.status){var o=l.api.converResponseToJson(t.data);if(null!=o&&0==o.ErrorCode){var r=l.createModel(o.Data,e,n);l.createPaymentForm(r)}else l.alert.showErrorMessageAlert("API Error = "+o.ErrorMessage)}}).catch(function(n){l.alert.showErrorMessageAlert("System Error "+n)})}},l.prototype.createModel=function(l,n,e){return{merchantId:l.MerchantId,amount:a.a.orderAmount,orderRef:l.OrderRef,successUrl:l.SuccessUrl,failUrl:l.FailUrl,errorUrl:l.ErrorUrl,secureHash:l.Hash,lang:"E",currCode:"458",payType:"N",remark:"JOMSAVE_KSJOA01B3YHD7dUS5CXX01HD6X64P0B1QDD",cardNo:this.Model.CreditCard,securityCode:this.Model.CVV,epMonth:n,epYear:e,cardHolder:this.Model.Name,pMethod:this.constantService.GetCardType(this.Model.CreditCard)}},l.prototype.createPaymentForm=function(l){var n=this,e='var form = document.createElement("form");';for(var t in e+='form.method="post";',e+='form.setAttribute("action","https://test.paydollar.com/b2cDemo/eng/dPayment/payComp.jsp");',l)e+="var "+t+'hiddenField = document.createElement("input");',e+=t+'hiddenField.setAttribute("type", "hidden");',e+=t+'hiddenField.setAttribute("name","'+t+'");',e+=t+'hiddenField.setAttribute("value","'+l[t]+'");',e+="form.appendChild("+t+"hiddenField);";e+="document.body.appendChild(form);",e+="form.submit();";try{var o=this.themeableBrowser.create("https://member-stage.jomsave.com//Home/EmptyView","_blank",{statusbar:{color:"#ffffffff"},toolbar:{height:44,color:"#f0f0f0ff"},title:{color:"#003264ff",showPageTitle:!0},backButton:{image:"back",imagePressed:"back_pressed",align:"left",event:"backPressed"},forwardButton:{image:"forward",imagePressed:"forward_pressed",align:"left",event:"forwardPressed"},closeButton:{image:"close",imagePressed:"close_pressed",align:"left",event:"closePressed"},backButtonCanClose:!0});o.on("closePressed").subscribe(function(l){o.close(),n.isMethodCalled=!1}),o.on("exit").subscribe(function(l){n.isStillHold=!0,n.isMethodCalled=!1,n.doCallGetProfile()}),o.on("loadstop").subscribe(function(l){n.isScriptExecuted||o.executeScript({code:e}).then(function(l){n.isScriptExecuted=!0})})}catch(r){this.alert.showErrorMessageAlert(r)}},l.prototype.doCallGetProfile=function(){return o.b(this,void 0,void 0,function(){var l=this;return o.e(this,function(n){switch(n.label){case 0:return[4,this.loadingController.create({message:"Please wait ..",duration:5e3})];case 1:return[4,n.sent().present()];case 2:return n.sent(),[4,setInterval(function(){l.doGetProfile()},5e3)];case 3:return n.sent(),[2]}})})},l.prototype.doGetProfile=function(){return o.b(this,void 0,void 0,function(){var l=this;return o.e(this,function(n){switch(n.label){case 0:return this.isDebug?[3,2]:[4,this.api.GetProfile(this.AccessToken).then(function(n){if(200==n.status){l.isStillHold=!1;var e=l.api.converResponseToJson(n.data);l.dataTransaction.setProfile(e.Data),l.loadingController.dismiss(),l.routerProvider.nextStep(e.Data.NextStep)}}).catch(function(n){l.alert.showErrorMessageAlert(n)})];case 1:return n.sent(),[3,4];case 2:return[4,this.restApi.GetProfile(this.AccessToken).subscribe(function(n){var e=l.restApi.converResponseToJson(n);null!=e?(l.isStillHold=!1,l.loadingController.dismiss(),l.dataTransaction.setProfile(e.Data),l.routerProvider.nextStep(e.Data.NextStep)):l.ErrorMessage=e.ErrorMessage})];case 3:n.sent(),n.label=4;case 4:return[2]}})})},l.prototype.doValidation=function(){return 0==this.Model.CreditCard.length?(this.alert.showErrorMessageAlert("Please key in your credit card number."),!1):0==this.Model.CVV.length?(this.alert.showErrorMessageAlert("Please key in your credit card's security number."),!1):0==this.Model.ExpireDate.length?(this.alert.showErrorMessageAlert("Please key in your credit card  expire date."),!1):0!=this.Model.Name.length||(this.alert.showErrorMessageAlert("Please key in your credit card holder name."),!1)},l.prototype.doOnKeyDown=function(l){/^[0-9]*$/.test(l.key)||8==l.keyCode||8==l.which||l.preventDefault()},l.prototype.doDetermineCard=function(){if(this.Model.CreditCard.length>=16){switch(this.constantService.GetCardType(this.Model.CreditCard)){case"VISA":this.CardTypeResource="../../assets/images/visa-card-logo.png";break;case"Master":this.CardTypeResource="../../assets/images/master-card-logo.png";break;default:this.CardTypeResource=""}this.showCard=!0}else this.showCard=!1},l}(),g=function(){return function(){}}(),f=e("pMnS"),m=e("oBZk"),C=e("Ip0R"),v=e("gIcY"),y=e("ZYCi"),M=t.nb({encapsulation:0,styles:[[""]],data:{}});function k(l){return t.Hb(0,[(l()(),t.pb(0,0,null,null,10,"ion-row",[],null,null,null,m.O,m.p)),t.ob(1,49152,null,0,i.jb,[t.h,t.k],null,null),(l()(),t.pb(2,0,null,0,8,"ion-col",[],null,null,null,m.D,m.e)),t.ob(3,49152,null,0,i.u,[t.h,t.k],null,null),(l()(),t.pb(4,0,null,0,6,"div",[["class","card-data-container"]],null,null,null,null,null)),(l()(),t.pb(5,0,null,null,0,"img",[["src","../../assets/images/visa.png"]],null,null,null,null,null)),(l()(),t.pb(6,0,null,null,0,"img",[["class","card-logo"]],[[8,"src",4]],null,null,null,null)),(l()(),t.pb(7,0,null,null,1,"p",[["class","card-name"]],null,null,null,null,null)),(l()(),t.Fb(8,null,["",""])),(l()(),t.pb(9,0,null,null,1,"p",[["class","card-expire-date"]],null,null,null,null,null)),(l()(),t.Fb(10,null,["",""]))],null,function(l,n){var e=n.component;l(n,6,0,t.rb(1,"",e.CardTypeResource,"")),l(n,8,0,e.Model.Name),l(n,10,0,e.Model.ExpireDate)})}function w(l){return t.Hb(0,[(l()(),t.pb(0,0,null,null,5,"ion-header",[["no-border",""]],null,null,null,m.I,m.j)),t.ob(1,49152,null,0,i.C,[t.h,t.k],null,null),(l()(),t.pb(2,0,null,0,3,"ion-toolbar",[],null,null,null,m.X,m.y)),t.ob(3,49152,null,0,i.Cb,[t.h,t.k],null,null),(l()(),t.pb(4,0,null,0,1,"ion-buttons",[["slot","end"]],null,null,null,m.C,m.d)),t.ob(5,49152,null,0,i.m,[t.h,t.k],null,null),(l()(),t.pb(6,0,null,null,62,"ion-content",[],null,null,null,m.E,m.f)),t.ob(7,49152,null,0,i.v,[t.h,t.k],null,null),(l()(),t.pb(8,0,null,0,60,"ion-content",[],null,null,null,m.E,m.f)),t.ob(9,49152,null,0,i.v,[t.h,t.k],null,null),(l()(),t.pb(10,0,null,0,58,"div",[["class","container"]],null,null,null,null,null)),(l()(),t.pb(11,0,null,null,53,"ion-grid",[],null,null,null,m.H,m.i)),t.ob(12,49152,null,0,i.B,[t.h,t.k],null,null),(l()(),t.pb(13,0,null,0,4,"ion-row",[],null,null,null,m.O,m.p)),t.ob(14,49152,null,0,i.jb,[t.h,t.k],null,null),(l()(),t.pb(15,0,null,0,2,"ion-col",[],null,null,null,m.D,m.e)),t.ob(16,49152,null,0,i.u,[t.h,t.k],null,null),(l()(),t.pb(17,0,null,0,0,"div",[["class","logo"]],null,null,null,null,null)),(l()(),t.pb(18,0,null,0,5,"ion-row",[],null,null,null,m.O,m.p)),t.ob(19,49152,null,0,i.jb,[t.h,t.k],null,null),(l()(),t.pb(20,0,null,0,3,"ion-col",[],null,null,null,m.D,m.e)),t.ob(21,49152,null,0,i.u,[t.h,t.k],null,null),(l()(),t.pb(22,0,null,0,1,"h5",[["class","warningMessage"]],null,null,null,null,null)),(l()(),t.Fb(-1,null,["Credit Card Information"])),(l()(),t.gb(16777216,null,0,1,null,k)),t.ob(25,16384,null,0,C.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.pb(26,0,null,0,38,"ion-row",[],null,null,null,m.O,m.p)),t.ob(27,49152,null,0,i.jb,[t.h,t.k],null,null),(l()(),t.pb(28,0,null,0,9,"ion-col",[["size","12"],["style","padding:0;margin: 0"]],null,null,null,m.D,m.e)),t.ob(29,49152,null,0,i.u,[t.h,t.k],{size:[0,"size"]},null),(l()(),t.pb(30,0,null,0,7,"input",[["class","creditcard-input"],["maxlength","16"],["placeholder","Card number"],["type","tel"]],[[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var o=!0,r=l.component;return"input"===n&&(o=!1!==t.zb(l,31)._handleInput(e.target.value)&&o),"blur"===n&&(o=!1!==t.zb(l,31).onTouched()&&o),"compositionstart"===n&&(o=!1!==t.zb(l,31)._compositionStart()&&o),"compositionend"===n&&(o=!1!==t.zb(l,31)._compositionEnd(e.target.value)&&o),"ngModelChange"===n&&(o=!1!==(r.Model.CreditCard=e)&&o),"keydown"===n&&(o=!1!==r.doOnKeyDown(e)&&o),"change"===n&&(o=!1!==r.doDetermineCard()&&o),o},null,null)),t.ob(31,16384,null,0,v.b,[t.D,t.k,[2,v.a]],null,null),t.ob(32,540672,null,0,v.d,[],{maxlength:[0,"maxlength"]},null),t.Cb(1024,null,v.e,function(l){return[l]},[v.d]),t.Cb(1024,null,v.f,function(l){return[l]},[v.b]),t.ob(35,671744,null,0,v.i,[[8,null],[6,v.e],[8,null],[6,v.f]],{model:[0,"model"]},{update:"ngModelChange"}),t.Cb(2048,null,v.g,null,[v.i]),t.ob(37,16384,null,0,v.h,[[4,v.g]],null,null),(l()(),t.pb(38,0,null,0,8,"ion-col",[["class","creditcard-datepicker"],["size","6"],["style","padding:0;margin: 0"]],null,null,null,m.D,m.e)),t.ob(39,49152,null,0,i.u,[t.h,t.k],{size:[0,"size"]},null),(l()(),t.pb(40,0,null,0,6,"ion-datetime",[["display-format","MM / YY"],["max","2030"],["min","2018"],["picker-format","MMM YYYY"],["style","padding-left:25px"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(l,n,e){var o=!0,r=l.component;return"ionBlur"===n&&(o=!1!==t.zb(l,41)._handleBlurEvent()&&o),"ionChange"===n&&(o=!1!==t.zb(l,41)._handleChangeEvent(e.target.value)&&o),"ngModelChange"===n&&(o=!1!==(r.Model.ExpireDate=e)&&o),o},m.F,m.g)),t.ob(41,16384,null,0,i.Mb,[t.k],null,null),t.Cb(1024,null,v.f,function(l){return[l]},[i.Mb]),t.ob(43,671744,null,0,v.i,[[8,null],[8,null],[8,null],[6,v.f]],{model:[0,"model"]},{update:"ngModelChange"}),t.Cb(2048,null,v.g,null,[v.i]),t.ob(45,16384,null,0,v.h,[[4,v.g]],null,null),t.ob(46,49152,null,0,i.w,[t.h,t.k],{min:[0,"min"],max:[1,"max"]},null),(l()(),t.pb(47,0,null,0,9,"ion-col",[["class","creditcard-cvv"],["size","6"],["style","padding:0;margin: 0"]],null,null,null,m.D,m.e)),t.ob(48,49152,null,0,i.u,[t.h,t.k],{size:[0,"size"]},null),(l()(),t.pb(49,0,null,0,7,"input",[["maxlength","4"],["placeholder","CVV"],["type","tel"]],[[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var o=!0,r=l.component;return"input"===n&&(o=!1!==t.zb(l,50)._handleInput(e.target.value)&&o),"blur"===n&&(o=!1!==t.zb(l,50).onTouched()&&o),"compositionstart"===n&&(o=!1!==t.zb(l,50)._compositionStart()&&o),"compositionend"===n&&(o=!1!==t.zb(l,50)._compositionEnd(e.target.value)&&o),"ngModelChange"===n&&(o=!1!==(r.Model.CVV=e)&&o),"keydown"===n&&(o=!1!==r.doOnKeyDown(e)&&o),o},null,null)),t.ob(50,16384,null,0,v.b,[t.D,t.k,[2,v.a]],null,null),t.ob(51,540672,null,0,v.d,[],{maxlength:[0,"maxlength"]},null),t.Cb(1024,null,v.e,function(l){return[l]},[v.d]),t.Cb(1024,null,v.f,function(l){return[l]},[v.b]),t.ob(54,671744,null,0,v.i,[[8,null],[6,v.e],[8,null],[6,v.f]],{model:[0,"model"]},{update:"ngModelChange"}),t.Cb(2048,null,v.g,null,[v.i]),t.ob(56,16384,null,0,v.h,[[4,v.g]],null,null),(l()(),t.pb(57,0,null,0,7,"ion-col",[["size","12"]],null,null,null,m.D,m.e)),t.ob(58,49152,null,0,i.u,[t.h,t.k],{size:[0,"size"]},null),(l()(),t.pb(59,0,null,0,5,"input",[["class","creditcard-input"],["placeholder","Name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var o=!0,r=l.component;return"input"===n&&(o=!1!==t.zb(l,60)._handleInput(e.target.value)&&o),"blur"===n&&(o=!1!==t.zb(l,60).onTouched()&&o),"compositionstart"===n&&(o=!1!==t.zb(l,60)._compositionStart()&&o),"compositionend"===n&&(o=!1!==t.zb(l,60)._compositionEnd(e.target.value)&&o),"ngModelChange"===n&&(o=!1!==(r.Model.Name=e)&&o),o},null,null)),t.ob(60,16384,null,0,v.b,[t.D,t.k,[2,v.a]],null,null),t.Cb(1024,null,v.f,function(l){return[l]},[v.b]),t.ob(62,671744,null,0,v.i,[[8,null],[8,null],[8,null],[6,v.f]],{model:[0,"model"]},{update:"ngModelChange"}),t.Cb(2048,null,v.g,null,[v.i]),t.ob(64,16384,null,0,v.h,[[4,v.g]],null,null),(l()(),t.pb(65,0,null,null,3,"ion-fab-button",[["class","next-button"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.doNext()&&t),t},m.G,m.h)),t.ob(66,49152,null,0,i.y,[t.h,t.k],null,null),(l()(),t.pb(67,0,null,0,1,"ion-icon",[["name","arrow-forward"]],null,null,null,m.J,m.k)),t.ob(68,49152,null,0,i.D,[t.h,t.k],{name:[0,"name"]},null)],function(l,n){var e=n.component;l(n,25,0,e.showCard),l(n,29,0,"12"),l(n,32,0,"16"),l(n,35,0,e.Model.CreditCard),l(n,39,0,"6"),l(n,43,0,e.Model.ExpireDate),l(n,46,0,"2018","2030"),l(n,48,0,"6"),l(n,51,0,"4"),l(n,54,0,e.Model.CVV),l(n,58,0,"12"),l(n,62,0,e.Model.Name),l(n,68,0,"arrow-forward")},function(l,n){l(n,30,0,t.zb(n,32).maxlength?t.zb(n,32).maxlength:null,t.zb(n,37).ngClassUntouched,t.zb(n,37).ngClassTouched,t.zb(n,37).ngClassPristine,t.zb(n,37).ngClassDirty,t.zb(n,37).ngClassValid,t.zb(n,37).ngClassInvalid,t.zb(n,37).ngClassPending),l(n,40,0,t.zb(n,45).ngClassUntouched,t.zb(n,45).ngClassTouched,t.zb(n,45).ngClassPristine,t.zb(n,45).ngClassDirty,t.zb(n,45).ngClassValid,t.zb(n,45).ngClassInvalid,t.zb(n,45).ngClassPending),l(n,49,0,t.zb(n,51).maxlength?t.zb(n,51).maxlength:null,t.zb(n,56).ngClassUntouched,t.zb(n,56).ngClassTouched,t.zb(n,56).ngClassPristine,t.zb(n,56).ngClassDirty,t.zb(n,56).ngClassValid,t.zb(n,56).ngClassInvalid,t.zb(n,56).ngClassPending),l(n,59,0,t.zb(n,64).ngClassUntouched,t.zb(n,64).ngClassTouched,t.zb(n,64).ngClassPristine,t.zb(n,64).ngClassDirty,t.zb(n,64).ngClassValid,t.zb(n,64).ngClassInvalid,t.zb(n,64).ngClassPending)})}function z(l){return t.Hb(0,[(l()(),t.pb(0,0,null,null,1,"app-top-up-account-info",[],null,null,null,w,M)),t.ob(1,114688,null,0,p,[y.n,r.a,d.a,c.a,i.Jb,s.a,b.a,u.a,h.a,i.Gb],null,null)],function(l,n){l(n,1,0)},null)}var x=t.lb("app-top-up-account-info",p,z,{},{},[]);e.d(n,"TopUpAccountInfoPageModuleNgFactory",function(){return D});var D=t.mb(g,[],function(l){return t.wb([t.xb(512,t.j,t.bb,[[8,[f.a,x]],[3,t.j],t.x]),t.xb(4608,C.l,C.k,[t.u,[2,C.s]]),t.xb(4608,v.n,v.n,[]),t.xb(4608,i.c,i.c,[t.z,t.g]),t.xb(4608,i.Hb,i.Hb,[i.c,t.j,t.q]),t.xb(4608,i.Kb,i.Kb,[i.c,t.j,t.q]),t.xb(1073742336,C.b,C.b,[]),t.xb(1073742336,v.l,v.l,[]),t.xb(1073742336,v.c,v.c,[]),t.xb(1073742336,i.Eb,i.Eb,[]),t.xb(1073742336,y.o,y.o,[[2,y.u],[2,y.n]]),t.xb(1073742336,g,g,[]),t.xb(1024,y.l,function(){return[[{path:"",component:p}]]},[])])})},utPD:function(l,n,e){"use strict";e.d(n,"a",function(){return u});var t=e("mrSG"),o=e("ZZ/e"),r=e("CcnG"),u=function(){function l(l,n){this.alertController=l,this.loadingCntroller=n}return l.prototype.showErrorMessageAlert=function(l){return t.b(this,void 0,void 0,function(){return t.e(this,function(n){switch(n.label){case 0:return[4,this.alertController.create({header:"Jom-Save",message:l,buttons:["OK"]})];case 1:return[4,n.sent().present()];case 2:return n.sent(),[2]}})})},l.ngInjectableDef=r.S({factory:function(){return new l(r.W(o.b),r.W(o.Gb))},token:l,providedIn:"root"}),l}()}}]);